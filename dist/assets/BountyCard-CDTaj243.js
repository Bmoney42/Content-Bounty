import{u as p,a as B,b as O,Q as K}from"./useRating-BTRneBHl.js";import{i as $,k as E,m as g,n as F,o as C,a as A,p as M,q as T,f as d,j as e}from"./index-Cp-zpohs.js";import{r as o}from"./router-DCicCOur.js";import{aa as U,D as u,ab as D,E as Q,d as L,U as b,j as G,s as I,q as f,K as j,l as w,a6 as N,a as v,C as y,N as _,A as V}from"./ui-D4EKNBIH.js";var W=class extends ${#t;#a=void 0;#e;#s;constructor(s,t){super(),this.#t=s,this.setOptions(t),this.bindMethods(),this.#r()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(s){const t=this.options;this.options=this.#t.defaultMutationOptions(s),E(this.options,t)||this.#t.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#e,observer:this}),t?.mutationKey&&this.options.mutationKey&&g(t.mutationKey)!==g(this.options.mutationKey)?this.reset():this.#e?.state.status==="pending"&&this.#e.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#e?.removeObserver(this)}onMutationUpdate(s){this.#r(),this.#i(s)}getCurrentResult(){return this.#a}reset(){this.#e?.removeObserver(this),this.#e=void 0,this.#r(),this.#i()}mutate(s,t){return this.#s=t,this.#e?.removeObserver(this),this.#e=this.#t.getMutationCache().build(this.#t,this.options),this.#e.addObserver(this),this.#e.execute(s)}#r(){const s=this.#e?.state??F();this.#a={...s,isPending:s.status==="pending",isSuccess:s.status==="success",isError:s.status==="error",isIdle:s.status==="idle",mutate:this.mutate,reset:this.reset}}#i(s){C.batch(()=>{if(this.#s&&this.hasListeners()){const t=this.#a.variables,a=this.#a.context;s?.type==="success"?(this.#s.onSuccess?.(s.data,t,a),this.#s.onSettled?.(s.data,null,t,a)):s?.type==="error"&&(this.#s.onError?.(s.error,t,a),this.#s.onSettled?.(void 0,s.error,t,a))}this.listeners.forEach(t=>{t(this.#a)})})}};function X(s,t){const a=A(),[r]=o.useState(()=>new W(a,s));o.useEffect(()=>{r.setOptions(s)},[r,s]);const n=o.useSyncExternalStore(o.useCallback(i=>r.subscribe(C.batchCalls(i)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),c=o.useCallback((i,x)=>{r.mutate(i,x).catch(M)},[r]);if(n.error&&T(r.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:c,mutateAsync:n.mutate}}function Z(){return p({queryKey:["bounties"],queryFn:async()=>await d.getBounties(),staleTime:300*1e3,gcTime:600*1e3})}function ee(s){return p({queryKey:["bounties","user",s],queryFn:async()=>await d.getBountiesByUser(s),staleTime:120*1e3,gcTime:300*1e3,enabled:!!s})}function se(){const s=A();return X({mutationFn:async t=>await d.createApplication(t),onSuccess:(t,a)=>{s.invalidateQueries({queryKey:["applications","bounty",a.bountyId]}),s.invalidateQueries({queryKey:["applications","user"]}),s.invalidateQueries({queryKey:["bounties"]})}})}function te(s){return p({queryKey:["applications","user",s],queryFn:async()=>await d.getCreatorApplications(s),staleTime:30*1e3,gcTime:120*1e3,enabled:!!s})}function ae(s){return p({queryKey:["submissions","user",s],queryFn:async()=>await d.getCreatorSubmissions(s),staleTime:30*1e3,gcTime:300*1e3,enabled:!!s})}const re=({bounty:s,onApply:t,onViewDetails:a,hasApplied:r=!1,applicationStatus:n,onDeliver:c,submissionStatus:i,feedback:x})=>{const{data:m}=B(s.businessId),{data:q}=O(s.businessId),P=l=>({review:"bg-gradient-to-r from-green-500 to-emerald-600 text-white",interview:"bg-gradient-to-r from-blue-500 to-indigo-600 text-white",tutorial:"bg-gradient-to-r from-purple-500 to-violet-600 text-white",unboxing:"bg-gradient-to-r from-orange-500 to-red-600 text-white",demo:"bg-gradient-to-r from-yellow-500 to-amber-600 text-white",testimonial:"bg-gradient-to-r from-pink-500 to-rose-600 text-white",download:"bg-gradient-to-r from-indigo-500 to-purple-600 text-white",announcement:"bg-gradient-to-r from-red-500 to-pink-600 text-white"})[l]||"bg-gradient-to-r from-gray-500 to-gray-600 text-white",R=l=>({active:"bg-green-500 text-white",paused:"bg-yellow-500 text-white",completed:"bg-blue-500 text-white",cancelled:"bg-red-500 text-white"})[l]||"bg-gray-500 text-white",S=()=>s.escrowPaymentId||s.status==="active"?e.jsxs("div",{className:"flex items-center space-x-1 bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs font-semibold",children:[e.jsx(f,{className:"w-3 h-3"}),e.jsx("span",{children:"Funded"})]}):e.jsxs("div",{className:"flex items-center space-x-1 bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full text-xs font-semibold",children:[e.jsx(w,{className:"w-3 h-3"}),e.jsx("span",{children:"Pending Payment"})]}),h=s.requirements.find(l=>l.type==="views");return e.jsx("div",{className:"bg-white rounded-2xl p-8 shadow-lg hover:shadow-2xl transition-all duration-500 cursor-pointer group border border-gray-100 hover:border-blue-200",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsxs("span",{className:`px-3 py-1.5 rounded-full text-xs font-bold ${P(s.category)} shadow-md`,children:[e.jsx(U,{className:"w-3 h-3 inline mr-1"}),s.category]}),e.jsx("span",{className:`px-3 py-1.5 rounded-full text-xs font-bold ${R(s.status)} shadow-md`,children:s.status}),S()]}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-3 group-hover:text-blue-600 transition-colors duration-300",children:s.title}),e.jsx("p",{className:"text-gray-600 text-sm leading-relaxed line-clamp-2",children:s.description})]}),e.jsxs("div",{className:"flex items-center bg-gradient-to-r from-green-500 to-emerald-600 text-white px-6 py-4 rounded-2xl ml-6 shadow-lg group-hover:scale-105 transition-transform duration-300",children:[e.jsx(u,{className:"w-6 h-6 mr-2"}),e.jsxs("span",{className:"font-bold text-2xl",children:["$",s.payment.amount]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(D,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:"By "}),e.jsx("span",{className:"font-semibold text-gray-900",children:s.businessName})]}),m&&m.totalReviews>0&&e.jsx(K,{rating:m.averageRating,reviewCount:m.totalReviews,trustLevel:q?.trustLevel,showBadge:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-600",children:[h&&e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-50 px-3 py-2 rounded-lg",children:[e.jsx(Q,{className:"w-4 h-4 text-blue-500"}),e.jsx("span",{className:"font-medium",children:h.description})]}),s.deadline&&e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-50 px-3 py-2 rounded-lg",children:[e.jsx(L,{className:"w-4 h-4 text-purple-500"}),e.jsxs("span",{className:"font-medium",children:["Due ",new Date(s.deadline).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-50 px-3 py-2 rounded-lg",children:[e.jsx(b,{className:"w-4 h-4 text-green-500"}),e.jsxs("span",{className:"font-medium",children:[s.applicationsCount," applications"]})]}),s.maxCreators&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-50 px-3 py-2 rounded-lg",children:[e.jsx(G,{className:"w-4 h-4 text-orange-500"}),e.jsxs("span",{className:"font-medium",children:["Goal: ",s.maxCreators," creators"]}),e.jsx("span",{className:`ml-2 px-2 py-1 rounded-full text-xs font-medium ${s.applicationsCount>=s.maxCreators?"bg-green-100 text-green-800":s.applicationsCount>=s.maxCreators*.8?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"}`,children:s.applicationsCount>=s.maxCreators?"Goal Reached!":`${s.applicationsCount}/${s.maxCreators}`})]}),s.maxApplications&&e.jsxs("div",{className:"flex items-center space-x-2 bg-orange-50 px-3 py-2 rounded-lg",children:[e.jsx(b,{className:"w-4 h-4 text-orange-500"}),e.jsxs("span",{className:"font-medium text-orange-900",children:["Applications: ",s.applicationsCount,"/",s.maxApplications]}),e.jsx("span",{className:`ml-2 px-2 py-1 rounded-full text-xs font-medium ${s.applicationsCount>=s.maxApplications?"bg-red-100 text-red-800":s.applicationsCount>=s.maxApplications*.8?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"}`,children:s.applicationsCount>=s.maxApplications?"Applications Closed!":`${s.applicationsCount}/${s.maxApplications}`})]}),s.maxCreators>1&&e.jsxs("div",{className:"flex items-center space-x-2 bg-blue-50 px-3 py-2 rounded-lg",children:[e.jsx(u,{className:"w-4 h-4 text-blue-500"}),e.jsxs("span",{className:"font-medium text-blue-900",children:["Paid: ",s.paidCreatorsCount||0,"/",s.maxCreators]}),e.jsxs("span",{className:"text-sm text-blue-700",children:["($",s.totalPaidAmount||0," paid, $",s.remainingBudget||0," remaining)"]})]})]})]}),s.talkingPoints.length>0&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(I,{className:"w-4 h-4 text-blue-500"}),e.jsx("span",{className:"font-semibold text-blue-900",children:"Key points:"})]}),e.jsxs("p",{className:"text-blue-700 text-sm",children:[s.talkingPoints.slice(0,2).join(", "),s.talkingPoints.length>2&&"..."]})]}),(s.escrowPaymentId||s.status==="active")&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(f,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:"font-semibold text-green-900",children:"Payment Guaranteed"})]}),e.jsxs("p",{className:"text-green-700 text-sm",children:["$",s.payment.amount," is secured in escrow and will be released upon completion and approval."]})]}),s.payment.milestones.length>0&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(u,{className:"w-4 h-4 text-blue-500"}),e.jsx("span",{className:"font-semibold text-blue-900",children:"Payment structure:"})]}),e.jsxs("p",{className:"text-blue-700 text-sm",children:[s.payment.milestones[0].percentage,"% on ",s.payment.milestones[0].description.toLowerCase(),s.payment.milestones.length>1&&` + ${s.payment.milestones.length-1} more milestones`]})]}),x&&(i==="rejected"||i==="requires_changes")&&e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(j,{className:"w-4 h-4 text-orange-500"}),e.jsx("span",{className:"font-semibold text-orange-900",children:"Business Feedback:"})]}),e.jsx("p",{className:"text-orange-700 text-sm",children:x})]}),e.jsxs("div",{className:"flex space-x-4 pt-6 border-t border-gray-200",children:[(()=>{const l=s.escrowPaymentId||s.status==="active";return r?n==="pending"?e.jsx("button",{disabled:!0,className:"flex-1 bg-yellow-100 text-yellow-700 border border-yellow-300 font-semibold py-4 px-6 rounded-xl transition-all duration-300 disabled:opacity-75 disabled:cursor-not-allowed",children:e.jsxs("span",{className:"flex items-center space-x-2",children:[e.jsx(N,{className:"w-4 h-4"}),e.jsx("span",{children:"Applied - Pending Review"})]})}):n==="accepted"?i==="submitted"?e.jsx("button",{disabled:!0,className:"flex-1 bg-blue-100 text-blue-700 border border-blue-300 font-semibold py-4 px-6 rounded-xl transition-all duration-300 disabled:opacity-75 disabled:cursor-not-allowed",children:e.jsxs("span",{className:"flex items-center space-x-2",children:[e.jsx(N,{className:"w-4 h-4"}),e.jsx("span",{children:"Waiting for Approval"})]})}):i==="approved"?e.jsx("button",{disabled:!0,className:"flex-1 bg-gradient-to-r from-green-500 to-emerald-600 text-white font-semibold py-4 px-6 rounded-xl transition-all duration-300 disabled:opacity-75 disabled:cursor-not-allowed shadow-lg",children:e.jsxs("span",{className:"flex items-center space-x-2",children:[e.jsx(v,{className:"w-4 h-4"}),e.jsx("span",{children:"✅ Completed & Paid!"})]})}):i==="requires_changes"?e.jsx("button",{onClick:()=>c?.(s.id),className:"flex-1 bg-orange-100 text-orange-700 border border-orange-300 font-semibold py-4 px-6 rounded-xl hover:shadow-lg transition-all duration-300 group-hover:scale-105",children:e.jsxs("span",{className:"flex items-center space-x-2",children:[e.jsx(j,{className:"w-4 h-4"}),e.jsx("span",{children:"Resubmit Content"})]})}):i==="rejected"?e.jsx("button",{disabled:!0,className:"flex-1 bg-red-100 text-red-700 border border-red-300 font-semibold py-4 px-6 rounded-xl transition-all duration-300 disabled:opacity-75 disabled:cursor-not-allowed",children:e.jsxs("span",{className:"flex items-center space-x-2",children:[e.jsx(y,{className:"w-4 h-4"}),e.jsx("span",{children:"Content Rejected"})]})}):e.jsx("button",{onClick:()=>c?.(s.id),className:"flex-1 bg-gradient-to-r from-green-600 to-emerald-600 text-white font-semibold py-4 px-6 rounded-xl hover:shadow-lg transition-all duration-300 group-hover:scale-105",children:e.jsxs("span",{className:"flex items-center space-x-2",children:[e.jsx(_,{className:"w-4 h-4"}),e.jsx("span",{children:"Deliver Content"})]})}):n==="rejected"?e.jsx("button",{disabled:!0,className:"flex-1 bg-red-100 text-red-700 border border-red-300 font-semibold py-4 px-6 rounded-xl transition-all duration-300 disabled:opacity-75 disabled:cursor-not-allowed",children:e.jsxs("span",{className:"flex items-center space-x-2",children:[e.jsx(y,{className:"w-4 h-4"}),e.jsx("span",{children:"Not Selected"})]})}):e.jsx("button",{disabled:!0,className:"flex-1 bg-gray-100 text-gray-700 border border-gray-300 font-semibold py-4 px-6 rounded-xl transition-all duration-300 disabled:opacity-75 disabled:cursor-not-allowed",children:e.jsxs("span",{className:"flex items-center space-x-2",children:[e.jsx(v,{className:"w-4 h-4"}),e.jsx("span",{children:"Applied"})]})}):l?e.jsx("button",{onClick:()=>t?.(s.id),disabled:s.status!=="active",className:"flex-1 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-semibold py-4 px-6 rounded-xl hover:shadow-lg transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed group-hover:scale-105",children:"Apply Now"}):e.jsx("button",{disabled:!0,className:"flex-1 bg-gray-100 text-gray-500 font-semibold py-4 px-6 rounded-xl transition-all duration-300 disabled:opacity-75 disabled:cursor-not-allowed",children:e.jsxs("span",{className:"flex items-center space-x-2",children:[e.jsx(w,{className:"w-4 h-4"}),e.jsx("span",{children:"Awaiting Payment"})]})})})(),e.jsxs("button",{onClick:()=>a?.(s.id),className:"flex-1 bg-white text-gray-700 font-semibold py-4 px-6 rounded-xl border border-gray-300 hover:bg-gray-50 transition-all duration-300 flex items-center justify-center space-x-2 group-hover:scale-105",children:[e.jsx("span",{children:"View Details"}),e.jsx(V,{className:"w-4 h-4 group-hover:translate-x-1 transition-transform duration-300"})]})]})]})})};export{re as B,ee as a,te as b,ae as c,se as d,Z as u};
