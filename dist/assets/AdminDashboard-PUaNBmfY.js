import{u as G,f as d,j as e}from"./index-Cp-zpohs.js";import{r}from"./router-DCicCOur.js";import{l as H,U as S,j as B,D as C,T as A,at as I,F as J,S as U,au as K,av as Q,a as W}from"./ui-D4EKNBIH.js";import"./vendor-gH-7aFTg.js";import"./firebase-DxBuhNaX.js";const te=()=>{const{user:n}=G(),[R,p]=r.useState(!0),[c,T]=r.useState("overview"),[l,k]=r.useState({totalUsers:0,totalCreators:0,totalBusinesses:0,totalBounties:0,activeBounties:0,completedBounties:0,totalRevenue:0,pendingReviews:0}),[g,$]=r.useState([]),[b,L]=r.useState([]),[j,P]=r.useState([]),[m,F]=r.useState("all"),[h,D]=r.useState("all"),[o,v]=r.useState("");r.useEffect(()=>{if(!n)return;if(!(n.email.includes("admin")||n.email==="brandon@themoneyfriends.com"||n.userType==="admin"||n.isAdmin===!0)){window.location.href="/dashboard";return}x()},[n]);const x=async()=>{try{p(!0);const s=await d.getAllUsers();$(s);const t=await d.getAllBounties();L(t);const a=await d.getPendingSubmissions();P(a);const u=s.filter(i=>i.userType==="creator"),V=s.filter(i=>i.userType==="business"),q=t.filter(i=>i.status==="active"),y=t.filter(i=>i.status==="completed"),z=y.reduce((i,f)=>i+f.payment.amount*(f.maxCreators||1),0)*.05;k({totalUsers:s.length,totalCreators:u.length,totalBusinesses:V.length,totalBounties:t.length,activeBounties:q.length,completedBounties:y.length,totalRevenue:z,pendingReviews:a.length})}catch(s){console.error("Error loading admin data:",s)}finally{p(!1)}},N=async(s,t)=>{try{await d.updateUserStatus(s,t),await x(),alert(`User ${t}d successfully`)}catch(a){console.error(`Error ${t}ing user:`,a),alert(`Failed to ${t} user`)}},E=async(s,t)=>{try{await d.updateBountyStatus(s,t),await x(),alert(`Bounty ${t}d successfully`)}catch(a){console.error(`Error ${t}ing bounty:`,a),alert(`Failed to ${t} bounty`)}},w=async(s,t,a)=>{try{await d.reviewSubmission(s,t,a),await x(),alert(`Submission ${t}d successfully`)}catch(u){console.error("Error reviewing submission:",u),alert("Failed to review submission")}},M=g.filter(s=>{const t=m==="all"||s.userType===m,a=s.name.toLowerCase().includes(o.toLowerCase())||s.email.toLowerCase().includes(o.toLowerCase());return t&&a}),O=b.filter(s=>{const t=h==="all"||s.status===h,a=s.title.toLowerCase().includes(o.toLowerCase());return t&&a});return R?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-gray-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-white text-lg",children:"Loading admin dashboard..."})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-gray-900 py-8 px-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx(H,{className:"w-8 h-8 text-blue-400"}),e.jsx("h1",{className:"text-4xl font-bold text-white",children:"Admin Dashboard"})]}),e.jsx("p",{className:"text-gray-300",children:"Platform management and oversight"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm border border-white/20 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(S,{className:"w-8 h-8 text-blue-400"}),e.jsx("span",{className:"text-xs bg-blue-500/20 text-blue-300 px-2 py-1 rounded-full",children:"Total"})]}),e.jsx("h3",{className:"text-3xl font-bold text-white mb-2",children:l.totalUsers}),e.jsx("p",{className:"text-gray-300 text-sm",children:"Platform Users"}),e.jsxs("div",{className:"text-xs text-gray-400 mt-2",children:[l.totalCreators," creators • ",l.totalBusinesses," businesses"]})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm border border-white/20 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(B,{className:"w-8 h-8 text-green-400"}),e.jsx("span",{className:"text-xs bg-green-500/20 text-green-300 px-2 py-1 rounded-full",children:"Active"})]}),e.jsx("h3",{className:"text-3xl font-bold text-white mb-2",children:l.totalBounties}),e.jsx("p",{className:"text-gray-300 text-sm",children:"Total Bounties"}),e.jsxs("div",{className:"text-xs text-gray-400 mt-2",children:[l.activeBounties," active • ",l.completedBounties," completed"]})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm border border-white/20 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(C,{className:"w-8 h-8 text-yellow-400"}),e.jsx("span",{className:"text-xs bg-yellow-500/20 text-yellow-300 px-2 py-1 rounded-full",children:"Revenue"})]}),e.jsxs("h3",{className:"text-3xl font-bold text-white mb-2",children:["$",l.totalRevenue.toLocaleString()]}),e.jsx("p",{className:"text-gray-300 text-sm",children:"Platform Revenue"}),e.jsx("div",{className:"text-xs text-gray-400 mt-2",children:"5% platform fee"})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm border border-white/20 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(A,{className:"w-8 h-8 text-red-400"}),e.jsx("span",{className:"text-xs bg-red-500/20 text-red-300 px-2 py-1 rounded-full",children:"Pending"})]}),e.jsx("h3",{className:"text-3xl font-bold text-white mb-2",children:l.pendingReviews}),e.jsx("p",{className:"text-gray-300 text-sm",children:"Pending Reviews"}),e.jsx("div",{className:"text-xs text-gray-400 mt-2",children:"Content awaiting review"})]})]}),e.jsx("div",{className:"bg-white/10 backdrop-blur-sm border border-white/20 rounded-2xl mb-8",children:e.jsx("div",{className:"flex overflow-x-auto",children:[{id:"overview",label:"Overview",icon:I},{id:"users",label:"Users",icon:S},{id:"bounties",label:"Bounties",icon:B},{id:"content",label:"Content Review",icon:J},{id:"payments",label:"Payments",icon:C}].map(s=>e.jsxs("button",{onClick:()=>T(s.id),className:`flex items-center space-x-2 px-6 py-4 border-b-2 transition-colors whitespace-nowrap ${c===s.id?"border-blue-400 text-blue-300":"border-transparent text-gray-400 hover:text-gray-300"}`,children:[e.jsx(s.icon,{className:"w-4 h-4"}),e.jsx("span",{children:s.label})]},s.id))})}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm border border-white/20 rounded-2xl p-8",children:[c==="overview"&&e.jsxs("div",{className:"space-y-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Platform Overview"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Recent Bounties"}),e.jsx("div",{className:"space-y-3",children:b.slice(0,5).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:s.title}),e.jsx("p",{className:"text-gray-400 text-sm",children:s.businessName})]}),e.jsx("div",{className:"text-right",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs ${s.status==="active"?"bg-green-500/20 text-green-300":s.status==="completed"?"bg-blue-500/20 text-blue-300":"bg-gray-500/20 text-gray-300"}`,children:s.status})})]},s.id))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Recent Users"}),e.jsx("div",{className:"space-y-3",children:g.slice(0,5).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:s.name}),e.jsx("p",{className:"text-gray-400 text-sm",children:s.email})]}),e.jsx("div",{className:"text-right",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs ${s.userType==="creator"?"bg-purple-500/20 text-purple-300":"bg-orange-500/20 text-orange-300"}`,children:s.userType})})]},s.id))})]})]})]}),c==="users"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"User Management"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(U,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",value:o,onChange:s=>v(s.target.value),placeholder:"Search users...",className:"pl-10 pr-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400"})]}),e.jsxs("select",{value:m,onChange:s=>F(s.target.value),className:"px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white",children:[e.jsx("option",{value:"all",children:"All Users"}),e.jsx("option",{value:"creator",children:"Creators"}),e.jsx("option",{value:"business",children:"Businesses"})]})]})]}),e.jsx("div",{className:"space-y-3",children:M.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white font-bold",children:s.name[0].toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:s.name}),e.jsx("p",{className:"text-gray-400 text-sm",children:s.email})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs ${s.userType==="creator"?"bg-purple-500/20 text-purple-300":"bg-orange-500/20 text-orange-300"}`,children:s.userType}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>N(s.id,"verify"),className:"p-2 bg-green-600/20 text-green-400 rounded-lg hover:bg-green-600/30 transition-colors",title:"Verify User",children:e.jsx(K,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>N(s.id,"suspend"),className:"p-2 bg-red-600/20 text-red-400 rounded-lg hover:bg-red-600/30 transition-colors",title:"Suspend User",children:e.jsx(Q,{className:"w-4 h-4"})})]})]})]},s.id))})]}),c==="bounties"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Bounty Management"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(U,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",value:o,onChange:s=>v(s.target.value),placeholder:"Search bounties...",className:"pl-10 pr-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400"})]}),e.jsxs("select",{value:h,onChange:s=>D(s.target.value),className:"px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white",children:[e.jsx("option",{value:"all",children:"All Bounties"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"completed",children:"Completed"})]})]})]}),e.jsx("div",{className:"space-y-3",children:O.map(s=>e.jsxs("div",{className:"p-4 bg-white/5 rounded-lg",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold",children:s.title}),e.jsx("p",{className:"text-gray-400 text-sm",children:s.businessName}),e.jsxs("p",{className:"text-gray-400 text-sm",children:["$",s.payment.amount," • ",s.category]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs ${s.status==="active"?"bg-green-500/20 text-green-300":s.status==="completed"?"bg-blue-500/20 text-blue-300":s.status==="pending"?"bg-yellow-500/20 text-yellow-300":"bg-gray-500/20 text-gray-300"}`,children:s.status}),e.jsx("button",{onClick:()=>E(s.id,"flag"),className:"p-2 bg-red-600/20 text-red-400 rounded-lg hover:bg-red-600/30 transition-colors",title:"Flag Bounty",children:e.jsx(A,{className:"w-4 h-4"})})]})]}),e.jsx("p",{className:"text-gray-300 text-sm line-clamp-2",children:s.description})]},s.id))})]}),c==="content"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Content Review"}),e.jsx("div",{className:"space-y-3",children:j.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(W,{className:"w-16 h-16 text-green-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"All caught up!"}),e.jsx("p",{className:"text-gray-400",children:"No pending content reviews at this time."})]}):j.map(s=>e.jsxs("div",{className:"p-4 bg-white/5 rounded-lg",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold",children:"Submission for Bounty"}),e.jsx("p",{className:"text-gray-400 text-sm",children:s.creatorName}),e.jsxs("p",{className:"text-gray-400 text-sm",children:["Submitted: ",new Date(s.submittedAt).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>w(s.id,"approve"),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Approve"}),e.jsx("button",{onClick:()=>w(s.id,"reject","Needs revision"),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Reject"})]})]}),e.jsxs("div",{className:"text-gray-300 text-sm",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Description:"})," ",s.description]}),s.contentLinks&&e.jsxs("p",{children:[e.jsx("strong",{children:"Links:"})," ",s.contentLinks]})]})]},s.id))})]}),c==="payments"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Payment Management"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white/5 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Platform Revenue"}),e.jsxs("div",{className:"text-3xl font-bold text-green-400 mb-2",children:["$",l.totalRevenue.toLocaleString()]}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Total platform commission (5%)"})]}),e.jsxs("div",{className:"bg-white/5 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Completed Payments"}),e.jsx("div",{className:"text-3xl font-bold text-blue-400 mb-2",children:l.completedBounties}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Successful bounty completions"})]})]}),e.jsxs("div",{className:"bg-white/5 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Payment Activity"}),e.jsx("p",{className:"text-gray-400",children:"Payment processing is handled automatically through Stripe. All escrow payments and creator payouts are managed by the system."})]})]})]})]})})};export{te as default};
