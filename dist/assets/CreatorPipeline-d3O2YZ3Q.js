import{u as B,j as e,L as D}from"./index-Cp-zpohs.js";import{r as L}from"./router-DCicCOur.js";import{b as E,c as F,u as $,B as T}from"./BountyCard-CDTaj243.js";import{a6 as u,a as d,f as b,E as V,J as R,F as U,D as _,C as q}from"./ui-D4EKNBIH.js";import"./vendor-gH-7aFTg.js";import"./firebase-DxBuhNaX.js";import"./useRating-BTRneBHl.js";const M=()=>{const{user:h}=B(),[l,g]=L.useState("pipeline"),{data:o=[],isLoading:y}=E(h?.id||""),{data:a=[],isLoading:j}=F(h?.id||""),{data:f=[],isLoading:w}=$();new Set(o.map(s=>s.bountyId));const N={};o.forEach(s=>{N[s.bountyId]=s.status});const v={},k={},I={};a.forEach(s=>{v[s.bountyId]=s.status,I[s.bountyId]=s.id,s.feedback&&(k[s.bountyId]=s.feedback)});const x=s=>f.find(t=>t.id===s),n=o.filter(s=>{if(!x(s.bountyId))return!1;const i=a.find(P=>P.bountyId===s.bountyId),r=i&&i.status==="approved";switch(l){case"pipeline":return!r;case"completed":return r;default:return!1}}),c={pending:n.filter(s=>s.status==="pending"),accepted:n.filter(s=>s.status==="accepted"),inProgress:n.filter(s=>{if(s.status!=="accepted")return!1;const t=a.find(i=>i.bountyId===s.bountyId);return t&&(t.status==="submitted"||t.status==="under_review")}),review:n.filter(s=>{if(s.status!=="accepted")return!1;const t=a.find(i=>i.bountyId===s.bountyId);return t&&t.status==="requires_changes"})},C=async s=>{console.log("Apply not available on Creator Pipeline page")},p=s=>{console.log("View details for bounty:",s)},m=async s=>{console.log("Deliver for bounty:",s)};if(y||j||w)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-gray-900 py-12 px-8",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx(D,{size:"lg",text:"Loading your pipeline..."})})});const A=s=>{switch(s){case"pending":return e.jsx(u,{className:"w-4 h-4"});case"accepted":return e.jsx(d,{className:"w-4 h-4"});case"rejected":return e.jsx(q,{className:"w-4 h-4"});default:return e.jsx(u,{className:"w-4 h-4"})}},S=s=>{switch(s){case"pending":return"text-yellow-600 bg-yellow-100 border-yellow-200";case"accepted":return"text-green-600 bg-green-100 border-green-200";case"rejected":return"text-red-600 bg-red-100 border-red-200";default:return"text-gray-600 bg-gray-100 border-gray-200"}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-gray-900 py-12 px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-12",children:[e.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:"Creator Pipeline"}),e.jsx("p",{className:"text-gray-300 text-lg",children:"Track your complete journey from application to completion. See where you stand in each bounty's workflow."})]}),e.jsx("div",{className:"flex space-x-1 bg-white/10 rounded-2xl p-1 mb-8",children:[{key:"pipeline",label:"Active Pipeline",count:n.filter(s=>{const t=a.find(i=>i.bountyId===s.bountyId);return!t||t.status!=="approved"}).length,description:"Bounties in progress"},{key:"completed",label:"Completed",count:n.filter(s=>{const t=a.find(i=>i.bountyId===s.bountyId);return t&&t.status==="approved"}).length,description:"Successfully completed orders"}].map(s=>e.jsxs("button",{onClick:()=>g(s.key),className:`flex-1 px-6 py-4 rounded-xl font-semibold transition-all duration-200 flex flex-col items-center space-y-2 ${l===s.key?"bg-white text-gray-900 shadow-lg":"text-white/70 hover:text-white hover:bg-white/5"}`,children:[e.jsx("span",{children:s.label}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${l===s.key?"bg-gray-200 text-gray-700":"bg-white/20 text-white/80"}`,children:s.count}),e.jsx("span",{className:`text-xs ${l===s.key?"text-gray-600":"text-white/60"}`,children:s.description})]})]},s.key))}),l==="pipeline"&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-yellow-500/20 rounded-full flex items-center justify-center",children:e.jsx(u,{className:"w-5 h-5 text-yellow-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Pending"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Awaiting review"})]})]}),e.jsx("div",{className:"text-2xl font-bold text-white mb-2",children:c.pending.length}),e.jsx("p",{className:"text-sm text-gray-400",children:"Applications submitted"})]}),e.jsxs("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-green-500/20 rounded-full flex items-center justify-center",children:e.jsx(d,{className:"w-5 h-5 text-green-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Accepted"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Ready to start"})]})]}),e.jsx("div",{className:"text-2xl font-bold text-white mb-2",children:c.accepted.length}),e.jsx("p",{className:"text-sm text-gray-400",children:"Bounties won"})]}),e.jsxs("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500/20 rounded-full flex items-center justify-center",children:e.jsx(b,{className:"w-5 h-5 text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"In Progress"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Content creation"})]})]}),e.jsx("div",{className:"text-2xl font-bold text-white mb-2",children:c.inProgress.length}),e.jsx("p",{className:"text-sm text-gray-400",children:"Currently working"})]}),e.jsxs("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-500/20 rounded-full flex items-center justify-center",children:e.jsx(V,{className:"w-5 h-5 text-purple-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Under Review"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Awaiting feedback"})]})]}),e.jsx("div",{className:"text-2xl font-bold text-white mb-2",children:c.review.length}),e.jsx("p",{className:"text-sm text-gray-400",children:"Pending approval"})]})]}),n.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx(R,{className:"w-16 h-16 text-white/40 mx-auto mb-6"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-3",children:"No active pipeline items"}),e.jsx("p",{className:"text-white/60 max-w-md mx-auto",children:"Start by applying to bounties! Your applications will appear here as they move through the pipeline."})]}):e.jsx("div",{className:"space-y-6",children:n.map(s=>{const t=x(s.bountyId),i=a.find(r=>r.bountyId===s.bountyId);return t?e.jsxs("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:t.title}),e.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium border ${S(s.status)}`,children:[A(s.status),e.jsx("span",{className:"ml-2",children:s.status.charAt(0).toUpperCase()+s.status.slice(1)})]})]}),e.jsx("p",{className:"text-gray-300 mb-3",children:t.description}),e.jsxs("div",{className:"flex items-center space-x-6 text-sm text-gray-400",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(U,{className:"w-4 h-4"}),e.jsxs("span",{children:["Applied ",new Date(s.submittedAt).toLocaleDateString()]})]}),s.status==="accepted"&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(d,{className:"w-4 h-4 text-green-400"}),e.jsx("span",{children:"Accepted"})]}),i&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(b,{className:"w-4 h-4 text-blue-400"}),e.jsx("span",{children:"Content submitted"})]}),i?.status==="approved"&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_,{className:"w-4 h-4 text-green-400"}),e.jsx("span",{children:"Payment ready"})]})]})]}),e.jsxs("div",{className:"text-right ml-6",children:[e.jsxs("div",{className:"text-2xl font-bold text-white mb-1",children:["$",t.payment.amount]}),e.jsx("div",{className:"text-sm text-gray-400",children:"Payment"})]})]}),e.jsxs("div",{className:"flex space-x-3 pt-4 border-t border-white/10",children:[e.jsx("button",{onClick:()=>p(t.id),className:"px-4 py-2 bg-white/10 text-white rounded-lg hover:bg-white/20 transition-colors",children:"View Details"}),s.status==="accepted"&&!i&&e.jsx("button",{onClick:()=>m(t.id),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Submit Content"}),i&&i.status==="requires_changes"&&e.jsx("button",{onClick:()=>m(t.id),className:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors",children:"Update Content"})]})]},s.id):null})})]}),l==="completed"&&e.jsx("div",{className:"space-y-6",children:n.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx(d,{className:"w-16 h-16 text-white/40 mx-auto mb-6"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-3",children:"No completed orders yet"}),e.jsx("p",{className:"text-white/60 max-w-md mx-auto",children:"Complete your first bounty to see it here! Keep working on your current assignments."})]}):e.jsx("div",{className:"grid gap-6",children:n.map(s=>{const t=x(s.bountyId),i=a.find(r=>r.bountyId===s.bountyId);return!t||!i?null:e.jsx(T,{bounty:t,onApply:C,onViewDetails:p,onDeliver:m,hasApplied:!0,applicationStatus:s.status,submissionStatus:i.status,feedback:i.feedback},t.id)})})})]})})};export{M as default};
