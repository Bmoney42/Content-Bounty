import{u as M,j as e,e as f,S as w,h as d,f as R}from"./index-Cp-zpohs.js";import{a as U,r as m}from"./router-DCicCOur.js";import{u as z,a9 as G,e as Y,l as H,g as N,j as v,D as L,s as O,P as V}from"./ui-D4EKNBIH.js";import"./vendor-gH-7aFTg.js";import"./firebase-DxBuhNaX.js";const Z=()=>{const C=U(),{user:n}=M(),[h,g]=m.useState("open"),[x,i]=m.useState(!1),[y,c]=m.useState(""),[k,P]=m.useState(!1),[u,_]=m.useState(null),[s,l]=m.useState({title:"",description:"",category:"review",payment:{amount:"",type:"fixed",milestones:[]},requirements:{minViews:"",minSubscribers:"",platform:"any"},talkingPoints:[""],deadline:"",maxCreators:"",maxApplications:"",assignedCreator:""}),A=[{value:"review",label:"Product Review",icon:"ðŸ“±"},{value:"tutorial",label:"Tutorial",icon:"ðŸŽ“"},{value:"unboxing",label:"Unboxing",icon:"ðŸ“¦"},{value:"demo",label:"Demo",icon:"ðŸŽ¬"},{value:"testimonial",label:"Testimonial",icon:"ðŸ’¬"},{value:"interview",label:"Interview",icon:"ðŸŽ¤"}],F=async a=>{if(a.preventDefault(),c(""),i(!0),!n){c("You must be logged in to create bounties"),i(!1);return}if(n.userType!=="business"){c("Only business accounts can create bounties"),i(!1);return}try{const t={title:d(s.title),description:d(s.description),budget:parseFloat(s.payment.amount),category:s.category,requirements:s.talkingPoints.filter(p=>p.trim()).map(p=>d(p)),deadline:s.deadline?new Date(s.deadline):void 0};if(!t.title||!t.description||!t.budget){c("Please fill in all required fields"),i(!1);return}if(t.budget<10||t.budget>1e4){c("Budget must be between $10 and $10,000"),i(!1);return}const r=s.maxCreators?parseInt(s.maxCreators):1,o=s.maxApplications?parseInt(s.maxApplications):void 0,b={title:t.title,description:t.description,budget:t.budget,category:s.category,requirements:t.requirements,deadline:t.deadline||new Date,status:"pending",createdBy:n.id,businessId:n.id,applicationsCount:0,maxCreators:r>1?r:void 0,maxApplications:o||void 0,paidCreatorsCount:0,totalPaidAmount:0,remainingBudget:t.budget*r},I=await R.createBounty(b),j=t.budget*r,$=j*.05,q=j+$,E=Math.round(q*100);await w.createEscrowPayment(I,n.id,E,n.email||"")}catch(t){console.error("Error creating bounty:",t),c("Failed to create bounty. Please try again."),i(!1)}},S=async()=>{if(!(!n||!u)){i(!0),c("");try{const a=s.maxCreators?parseInt(s.maxCreators):1,t=parseFloat(s.payment.amount)*a,r=Math.round(t*100);await w.createEscrowPaymentUpfront({title:d(s.title),description:d(s.description),budget:parseFloat(s.payment.amount),category:s.category,requirements:s.talkingPoints.filter(o=>o.trim()).map(o=>d(o)),deadline:s.deadline?new Date(s.deadline):new Date,maxCreators:s.maxCreators?parseInt(s.maxCreators):void 0},n.id,r,n.email||"")}catch(a){console.error("Error creating escrow payment:",a),c("Failed to create escrow payment. Please try again."),i(!1)}}},B=()=>{l(a=>({...a,talkingPoints:[...a.talkingPoints,""]}))},T=(a,t)=>{l(r=>({...r,talkingPoints:r.talkingPoints.map((o,b)=>b===a?t:o)}))},D=a=>{l(t=>({...t,talkingPoints:t.talkingPoints.filter((r,o)=>o!==a)}))};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-gray-900 py-12 px-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("button",{onClick:()=>C("/bounties"),className:"inline-flex items-center space-x-2 text-gray-300 hover:text-white transition-colors duration-200 mb-6",children:[e.jsx(z,{className:"w-4 h-4"}),e.jsx("span",{children:"Back to Bounties"})]}),e.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:"Create New Bounty"}),e.jsx("p",{className:"text-gray-300 text-lg",children:"Set up a bounty for creators to complete"})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm border border-white/20 rounded-2xl p-8 mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Bounty Type"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("button",{onClick:()=>g("open"),className:`p-6 rounded-xl border-2 transition-all duration-300 ${h==="open"?"border-blue-500 bg-blue-500/10 text-white":"border-white/20 text-gray-300 hover:border-white/40"}`,children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx(G,{className:"w-6 h-6"}),e.jsx("span",{className:"font-semibold text-lg",children:"Open Bounty"})]}),e.jsx("p",{className:"text-sm opacity-80",children:"Available to all creators. First come, first served."})]}),e.jsxs("button",{onClick:()=>g("assigned"),className:`p-6 rounded-xl border-2 transition-all duration-300 ${h==="assigned"?"border-blue-500 bg-blue-500/10 text-white":"border-white/20 text-gray-300 hover:border-white/40"}`,children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx(Y,{className:"w-6 h-6"}),e.jsx("span",{className:"font-semibold text-lg",children:"Assigned Bounty"})]}),e.jsx("p",{className:"text-sm opacity-80",children:"Directly assign to a specific creator."})]})]})]}),k&&u&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm border border-white/20 rounded-2xl p-8 max-w-md w-full mx-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx(H,{className:"w-6 h-6 text-green-400"}),e.jsx("h3",{className:"text-xl font-bold text-white",children:"Secure Escrow Payment"})]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"bg-white/5 rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-gray-300",children:"Bounty Amount:"}),e.jsxs("span",{className:"text-white font-semibold",children:["$",(u.totalAmount/100).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-gray-300",children:"Platform Fees:"}),e.jsx("span",{className:"text-green-400",children:"$0.00"})]}),e.jsx("div",{className:"border-t border-white/20 pt-2",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-300",children:"Creator Earnings:"}),e.jsxs("span",{className:"text-green-400 font-semibold",children:["$",(u.totalAmount/100).toFixed(2)]})]})})]}),e.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(N,{className:"w-4 h-4 text-blue-400"}),e.jsx("span",{className:"text-blue-400 font-semibold",children:"Secure Upfront Payment"})]}),e.jsx("p",{className:"text-sm text-gray-300",children:"Payment is required upfront to create your bounty. Funds are held securely in escrow until work completion and approval."}),e.jsx("div",{className:"mt-2 p-2 bg-green-500/10 border border-green-500/20 rounded",children:e.jsxs("p",{className:"text-xs text-green-400",children:["âœ“ Guarantees creator payment",e.jsx("br",{}),"âœ“ Shows serious commitment",e.jsx("br",{}),"âœ“ Attracts quality applicants"]})})]})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{onClick:()=>P(!1),className:"flex-1 px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors",disabled:x,children:"Cancel"}),e.jsx("button",{onClick:S,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors flex items-center justify-center space-x-2",disabled:x,children:x?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),e.jsx("span",{children:"Processing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"w-4 h-4"}),e.jsx("span",{children:"Secure Payment & Create"})]})})]})]})}),y&&e.jsx("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-4 mb-6",children:e.jsx("p",{className:"text-red-400",children:y})}),e.jsxs("form",{onSubmit:F,className:"space-y-8",children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm border border-white/20 rounded-2xl p-8",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white mb-6 flex items-center space-x-3",children:[e.jsx(v,{className:"w-6 h-6"}),e.jsx("span",{children:"Basic Information"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-white font-semibold mb-2",children:"Bounty Title *"}),e.jsx("input",{type:"text",value:s.title,onChange:a=>l(t=>({...t,title:a.target.value})),className:"w-full px-4 py-3 bg-white/5 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-blue-500 transition-colors",placeholder:"e.g., Create a product review video",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white font-semibold mb-2",children:"Category *"}),e.jsx("select",{value:s.category,onChange:a=>l(t=>({...t,category:a.target.value})),className:"w-full px-4 py-3 bg-white/5 border border-white/20 rounded-lg text-white focus:outline-none focus:border-blue-500 transition-colors",children:A.map(a=>e.jsxs("option",{value:a.value,children:[a.icon," ",a.label]},a.value))})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{className:"block text-white font-semibold mb-2",children:"Description *"}),e.jsx("textarea",{value:s.description,onChange:a=>l(t=>({...t,description:a.target.value})),rows:4,className:"w-full px-4 py-3 bg-white/5 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-blue-500 transition-colors",placeholder:"Describe what you want creators to do...",required:!0})]})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm border border-white/20 rounded-2xl p-8",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white mb-6 flex items-center space-x-3",children:[e.jsx(L,{className:"w-6 h-6"}),e.jsx("span",{children:"Payment Details"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-white font-semibold mb-2",children:"Budget Per Creator *"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:"$"}),e.jsx("input",{type:"number",value:s.payment.amount,onChange:a=>l(t=>({...t,payment:{...t.payment,amount:a.target.value}})),className:"w-full pl-8 pr-4 py-3 bg-white/5 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-blue-500 transition-colors",placeholder:"100",min:"10",max:"10000",step:"0.01",required:!0})]}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Minimum $10, Maximum $10,000 per creator"}),s.payment.amount&&!s.maxCreators&&e.jsx("div",{className:"mt-2 p-3 bg-purple-500/10 border border-purple-500/20 rounded-lg",children:(()=>{const a=parseFloat(s.payment.amount),t=f(a,1);return e.jsxs("div",{className:"text-xs space-y-1",children:[e.jsx("p",{className:"text-purple-400",children:e.jsx("span",{className:"font-semibold",children:"Single Creator Estimate:"})}),e.jsxs("p",{className:"text-purple-300",children:["Creator receives: ",t.bountyAmount," â€¢ You pay: ",t.businessTotal]}),e.jsxs("p",{className:"text-purple-300",children:["(Includes ",t.platformFee," service fee - that's it!)"]})]})})()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white font-semibold mb-2",children:"Deadline"}),e.jsx("input",{type:"date",value:s.deadline,onChange:a=>l(t=>({...t,deadline:a.target.value})),className:"w-full px-4 py-3 bg-white/5 border border-white/20 rounded-lg text-white focus:outline-none focus:border-blue-500 transition-colors"})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{className:"block text-white font-semibold mb-2",children:"Goal: Max Creators Needed"}),e.jsx("input",{type:"number",value:s.maxCreators,onChange:a=>l(t=>({...t,maxCreators:a.target.value})),className:"w-full px-4 py-3 bg-white/5 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-blue-500 transition-colors",placeholder:"e.g., 5 creators needed (leave empty for unlimited)",min:"1"}),e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"How many creators will be paid for this bounty"}),s.maxCreators&&s.payment.amount&&e.jsx("div",{className:"mt-3 p-4 bg-blue-500/10 border border-blue-500/20 rounded-lg",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-blue-400 text-sm",children:[e.jsx("span",{className:"font-semibold",children:"Bounty per Creator:"})," $",s.payment.amount]}),e.jsxs("p",{className:"text-blue-400 text-sm",children:[e.jsx("span",{className:"font-semibold",children:"Total Bounty Amount:"})," $",s.payment.amount," Ã— ",s.maxCreators," = $",(parseFloat(s.payment.amount)*parseInt(s.maxCreators)).toFixed(2)]}),e.jsx("div",{className:"border-t border-blue-500/20 pt-2 mt-2",children:(()=>{const a=parseFloat(s.payment.amount),t=parseInt(s.maxCreators),r=f(a,t);return e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-blue-300 text-xs",children:[e.jsx("span",{className:"font-semibold",children:"Service Fee (5%):"})," ",r.platformFee]}),e.jsxs("p",{className:"text-white font-bold border-t border-blue-500/20 pt-2 mt-2",children:[e.jsx("span",{className:"font-semibold",children:"Total You Pay:"})," ",r.businessTotal]}),e.jsxs("p",{className:"text-green-400 text-xs mt-1",children:["âœ“ Creators receive the full ",r.bountyAmount," bounty amount"]})]})})()})]})})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{className:"block text-white font-semibold mb-2",children:"Max Applications to Accept"}),e.jsx("input",{type:"number",value:s.maxApplications,onChange:a=>l(t=>({...t,maxApplications:a.target.value})),className:"w-full px-4 py-3 bg-white/5 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-blue-500 transition-colors",placeholder:"e.g., 20 applications (leave empty for unlimited)",min:"1"}),e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"How many applications to accept before closing (leave empty for unlimited)"})]})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm border border-white/20 rounded-2xl p-8",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white mb-6 flex items-center space-x-3",children:[e.jsx(O,{className:"w-6 h-6"}),e.jsx("span",{children:"Requirements & Talking Points"})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-white font-semibold mb-2",children:"Talking Points"}),s.talkingPoints.map((a,t)=>e.jsxs("div",{className:"flex space-x-2 mb-2",children:[e.jsx("input",{type:"text",value:a,onChange:r=>T(t,r.target.value),className:"flex-1 px-4 py-3 bg-white/5 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-blue-500 transition-colors",placeholder:`Talking point ${t+1}`}),s.talkingPoints.length>1&&e.jsx("button",{type:"button",onClick:()=>D(t),className:"px-3 py-3 bg-red-500/20 hover:bg-red-500/30 text-red-400 rounded-lg transition-colors",children:"Ã—"})]},t)),e.jsxs("button",{type:"button",onClick:B,className:"flex items-center space-x-2 px-4 py-2 bg-blue-500/20 hover:bg-blue-500/30 text-blue-400 rounded-lg transition-colors",children:[e.jsx(V,{className:"w-4 h-4"}),e.jsx("span",{children:"Add Talking Point"})]})]})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",disabled:x,className:"px-8 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors flex items-center space-x-2",children:x?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),e.jsx("span",{children:"Creating & Redirecting to Payment..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(v,{className:"w-4 h-4"}),e.jsx("span",{children:"Create Bounty & Pay"})]})})})]})]})})};export{Z as default};
