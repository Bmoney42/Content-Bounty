import{u as ge,a as de,d as $,j as e,r as me,s as ue,b as _e,g as ze,c as Ve,l as We,f as q,N as Qe,S as Ke,L as Ye}from"./index-Cp-zpohs.js";import{r as y,R as Ge}from"./router-DCicCOur.js";import{B as Xe,u as He,a as Ze,b as Je,c as et,d as tt}from"./BountyCard-CDTaj243.js";import{D as ie,m as K,q as se,w as ae,k as oe,x as st,t as Q,l as ke,o as at,n as be}from"./firebase-DxBuhNaX.js";import{u as rt,U as it}from"./UpgradeModal-BX2CXJQG.js";import{y as nt,t as lt,S as ot,z as ct,X as ee,G as dt,J as mt,D as ve,d as $e,U as he,K as Y,a as O,N as ut,O as xt,Q as Re,V as Me,W as Ne,F as re,Y as we,_ as Se,$ as Ie,a0 as Ae,a1 as Fe,p as Ce,a2 as De,a3 as Ee,a4 as ht,a5 as pt,C as pe,a6 as ce,a7 as gt,c as bt,g as yt,a8 as ft,j as qe,E as jt,s as Le,h as vt}from"./ui-D4EKNBIH.js";import{B as xe}from"./Button-CbNmxST3.js";import{C as ye}from"./Card-DCtj1dQR.js";import"./vendor-gH-7aFTg.js";import"./useRating-BTRneBHl.js";function Nt(){const s=de();y.useEffect(()=>{console.log("🔄 Setting up real-time bounties listener");const t=ie(K($,"bounties"),a=>{console.log("📡 Bounties collection updated, invalidating cache"),s.invalidateQueries({queryKey:["bounties"]})},a=>{console.error("❌ Error in bounties real-time listener:",a)});return()=>{console.log("🔄 Cleaning up bounties real-time listener"),t()}},[s])}function wt(s){const t=de();y.useEffect(()=>{if(!s)return;console.log("🔄 Setting up real-time applications listener for user:",s);const a=se(K($,"applications"),ae("creatorId","==",s)),l=ie(a,o=>{console.log("📡 Creator applications updated, invalidating cache"),t.invalidateQueries({queryKey:["applications","user",s]})},o=>{console.error("❌ Error in creator applications real-time listener:",o)}),n=K($,"applications"),r=ie(n,o=>{console.log("📡 All applications updated, invalidating cache"),t.invalidateQueries({queryKey:["applications","all"]}),t.invalidateQueries({queryKey:["applications","bounty"]})},o=>{console.error("❌ Error in all applications real-time listener:",o)});return()=>{console.log("🔄 Cleaning up applications real-time listeners"),l(),r()}},[t,s])}function St(s){const t=de();y.useEffect(()=>{if(!s)return;console.log("🔄 Setting up real-time submissions listener for user:",s);const a=se(K($,"submissions"),ae("creatorId","==",s)),l=ie(a,o=>{console.log("📡 Creator submissions updated, invalidating cache"),t.invalidateQueries({queryKey:["submissions","user",s]})},o=>{console.error("❌ Error in creator submissions real-time listener:",o)}),n=K($,"submissions"),r=ie(n,o=>{console.log("📡 All submissions updated, invalidating cache"),t.invalidateQueries({queryKey:["submissions","all"]}),t.invalidateQueries({queryKey:["submissions","bounty"]})},o=>{console.error("❌ Error in all submissions real-time listener:",o)});return()=>{console.log("🔄 Cleaning up submissions real-time listeners"),l(),r()}},[t,s])}function Ct(s){const t=de();y.useEffect(()=>{if(!s)return;console.log("🔄 Setting up real-time user data listener for user:",s);const a=ie(oe($,"users",s),l=>{l.exists()&&(console.log("📡 User data updated, invalidating cache"),t.invalidateQueries({queryKey:["user",s]}),t.invalidateQueries({queryKey:["user-stats",s]}))},l=>{console.error("❌ Error in user data real-time listener:",l)});return()=>{console.log("🔄 Cleaning up user data real-time listener"),a()}},[t,s])}function kt(){const{user:s}=ge();Nt(),wt(s?.id),St(s?.id),Ct(s?.id)}const Oe=({currentPage:s,totalPages:t,totalItems:a,itemsPerPage:l,onPageChange:n,showInfo:r=!0})=>{const o=(s-1)*l+1,c=Math.min(s*l,a),d=()=>{const h=[],g=[];for(let v=Math.max(2,s-2);v<=Math.min(t-1,s+2);v++)h.push(v);return s-2>2?g.push(1,"..."):g.push(1),g.push(...h),s+2<t-1?g.push("...",t):g.push(t),g};return t<=1?null:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 mt-8",children:[r&&e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Showing ",o," to ",c," of ",a," results"]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsxs("button",{onClick:()=>n(s-1),disabled:s===1,className:"flex items-center px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-l-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700",children:[e.jsx(nt,{className:"w-4 h-4 mr-1"}),"Previous"]}),e.jsx("div",{className:"flex items-center",children:d().map((x,h)=>e.jsx(Ge.Fragment,{children:x==="..."?e.jsx("span",{className:"px-3 py-2 text-sm font-medium text-gray-500 dark:text-gray-400",children:"..."}):e.jsx("button",{onClick:()=>n(x),className:`px-3 py-2 text-sm font-medium border-t border-b ${s===x?"bg-blue-600 text-white border-blue-600":"text-gray-500 bg-white border-gray-300 hover:bg-gray-50 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700"}`,children:x})},h))}),e.jsxs("button",{onClick:()=>n(s+1),disabled:s===t,className:"flex items-center px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-r-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700",children:["Next",e.jsx(lt,{className:"w-4 h-4 ml-1"})]})]})]})},At=({filters:s,onUpdateFilter:t,onResetFilters:a,hasActiveFilters:l,totalResults:n,totalBounties:r,showFilters:o,onToggleFilters:c})=>{const d=["all","review","interview","tutorial","unboxing","demo","testimonial","download","announcement"],x=[{value:"all",label:"All Status"},{value:"active",label:"Active"},{value:"in-progress",label:"In Progress"},{value:"completed",label:"Completed"}],h=[{value:"newest",label:"Newest First"},{value:"oldest",label:"Oldest First"},{value:"payment-high",label:"Highest Payment"},{value:"payment-low",label:"Lowest Payment"},{value:"applications",label:"Most Applications"}];return e.jsxs("div",{className:"glass-card rounded-3xl p-8 mb-8",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(ot,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{placeholder:"Search bounties by title, description, or company...",value:s.searchTerm,onChange:g=>t("searchTerm",g.target.value),className:"w-full pl-12 pr-4 py-4 modern-input rounded-2xl text-gray-900 placeholder-gray-500 font-medium"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:c,className:`secondary-modern-button px-6 py-4 rounded-2xl font-semibold flex items-center space-x-3 ${l?"ring-2 ring-blue-400":""}`,children:[e.jsx(ct,{className:"w-5 h-5"}),e.jsx("span",{children:"Filters"}),l&&e.jsx("span",{className:"bg-blue-500 text-white text-xs px-2 py-1 rounded-full",children:Object.entries(s).filter(([g,v])=>g!=="sortBy"&&v!==""&&v!=="all").length})]}),l&&e.jsx("button",{onClick:a,className:"text-gray-600 hover:text-gray-900 transition-colors p-2",title:"Reset filters",children:e.jsx(ee,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("p",{className:"text-sm text-gray-600 font-medium",children:["Showing ",n," of ",r," bounties",l&&e.jsx("span",{className:"text-blue-600",children:" (filtered)"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(dt,{className:"w-4 h-4 text-gray-400"}),e.jsx("select",{value:s.sortBy,onChange:g=>t("sortBy",g.target.value),className:"px-3 py-2 text-sm modern-input rounded-lg text-gray-900 font-medium bg-white border border-gray-300",children:h.map(g=>e.jsx("option",{value:g.value,className:"bg-white text-gray-900",children:g.label},g.value))})]})]}),o&&e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6 pt-6 border-t border-gray-200",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-base font-semibold text-gray-900 mb-3",children:"Category"}),e.jsx("select",{value:s.category,onChange:g=>t("category",g.target.value),className:"w-full px-4 py-3 rounded-2xl text-gray-900 font-medium bg-white border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500",children:d.map(g=>e.jsx("option",{value:g,className:"bg-white text-gray-900",children:g==="all"?"All Categories":g.charAt(0).toUpperCase()+g.slice(1)},g))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-base font-semibold text-gray-900 mb-3",children:"Status"}),e.jsx("select",{value:s.status,onChange:g=>t("status",g.target.value),className:"w-full px-4 py-3 rounded-2xl text-gray-900 font-medium bg-white border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500",children:x.map(g=>e.jsx("option",{value:g.value,className:"bg-white text-gray-900",children:g.label},g.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-base font-semibold text-gray-900 mb-3",children:"Min Payment ($)"}),e.jsx("input",{type:"number",placeholder:"0",value:s.minPayment,onChange:g=>t("minPayment",g.target.value),min:"0",className:"w-full px-4 py-3 rounded-2xl text-gray-900 placeholder-gray-500 font-medium bg-white border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-base font-semibold text-gray-900 mb-3",children:"Max Payment ($)"}),e.jsx("input",{type:"number",placeholder:"1000",value:s.maxPayment,onChange:g=>t("maxPayment",g.target.value),min:"0",className:"w-full px-4 py-3 rounded-2xl text-gray-900 placeholder-gray-500 font-medium bg-white border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]})};function Ue(s,t={}){const{itemsPerPage:a=10,initialPage:l=1}=t,[n,r]=y.useState(l),o=s.length,c=Math.ceil(o/a),d=y.useMemo(()=>{const v=(n-1)*a,S=v+a;return s.slice(v,S)},[s,n,a]),x=v=>{const S=Math.max(1,Math.min(v,c));r(S)},h=()=>{n<c&&r(n+1)},g=()=>{n>1&&r(n-1)};return n>c&&c>0&&r(1),{currentPage:n,totalPages:c,totalItems:o,itemsPerPage:a,paginatedItems:d,setCurrentPage:x,nextPage:h,prevPage:g,goToPage:x}}const fe={searchTerm:"",category:"all",minPayment:"",maxPayment:"",status:"all",sortBy:"newest",businessName:""};function Ft(s){const[t,a]=y.useState(fe),l=y.useMemo(()=>{let c=s.filter(d=>{const x=!t.searchTerm||d.title.toLowerCase().includes(t.searchTerm.toLowerCase())||d.description.toLowerCase().includes(t.searchTerm.toLowerCase())||d.businessName.toLowerCase().includes(t.searchTerm.toLowerCase()),h=t.category==="all"||d.category===t.category,g=!t.minPayment||d.payment.amount>=parseInt(t.minPayment),v=!t.maxPayment||d.payment.amount<=parseInt(t.maxPayment),S=t.status==="all"||d.status===t.status,m=!t.businessName||d.businessName.toLowerCase().includes(t.businessName.toLowerCase());return x&&h&&g&&v&&S&&m});return c.sort((d,x)=>{switch(t.sortBy){case"newest":return new Date(x.createdAt).getTime()-new Date(d.createdAt).getTime();case"oldest":return new Date(d.createdAt).getTime()-new Date(x.createdAt).getTime();case"payment-high":return x.payment.amount-d.payment.amount;case"payment-low":return d.payment.amount-x.payment.amount;case"applications":return x.applicationsCount-d.applicationsCount;default:return 0}}),c},[s,t]),n=(c,d)=>{a(x=>({...x,[c]:d}))},r=()=>{a(fe)},o=y.useMemo(()=>Object.entries(t).some(([c,d])=>c==="sortBy"?!1:d!==fe[c]),[t]);return{filters:t,filteredBounties:l,updateFilter:n,resetFilters:r,hasActiveFilters:o,totalResults:l.length,totalBounties:s.length}}const Dt=({bounties:s,loading:t=!1,onApply:a,onViewDetails:l,onDeliver:n,appliedBounties:r,applicationStatuses:o,submissionStatuses:c,submissionFeedback:d,itemsPerPage:x=5,showStatusTabs:h=!0})=>{const[g,v]=y.useState(!1),[S,m]=y.useState("active"),k=h?s.filter(w=>{switch(S){case"active":return w.status==="active";case"in-progress":return w.status==="in-progress";case"completed":return w.status==="completed";default:return!0}}):s.filter(w=>w.status==="active"),{filters:L,filteredBounties:j,updateFilter:u,resetFilters:f,hasActiveFilters:A,totalResults:G}=Ft(k),{currentPage:U,totalPages:_,totalItems:R,paginatedItems:X,goToPage:H}=Ue(j,{itemsPerPage:x});return t?e.jsx("div",{className:"space-y-8",children:[...Array(6)].map((w,Z)=>e.jsx("div",{className:"glass-card rounded-3xl p-8 animate-pulse",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex space-x-3 mb-4",children:[e.jsx("div",{className:"h-6 bg-white/10 rounded-full w-20"}),e.jsx("div",{className:"h-6 bg-white/10 rounded-full w-16"})]}),e.jsx("div",{className:"h-6 bg-white/10 rounded w-3/4 mb-3"}),e.jsx("div",{className:"h-4 bg-white/10 rounded w-full"}),e.jsx("div",{className:"h-4 bg-white/10 rounded w-2/3"})]}),e.jsx("div",{className:"h-12 w-20 bg-white/10 rounded-2xl ml-6"})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("div",{className:"h-4 bg-white/10 rounded w-24"}),e.jsx("div",{className:"h-4 bg-white/10 rounded w-24"}),e.jsx("div",{className:"h-4 bg-white/10 rounded w-24"})]}),e.jsxs("div",{className:"flex space-x-4 pt-6 border-t border-white/10",children:[e.jsx("div",{className:"h-12 bg-white/10 rounded-2xl flex-1"}),e.jsx("div",{className:"h-12 bg-white/10 rounded-2xl flex-1"})]})]})},Z))}):e.jsxs("div",{className:"space-y-8",children:[h&&e.jsx("div",{className:"flex space-x-1 bg-white/10 rounded-2xl p-1",children:[{key:"active",label:"Active",count:s.filter(w=>w.status==="active").length},{key:"in-progress",label:"In Progress",count:s.filter(w=>w.status==="in-progress").length},{key:"completed",label:"Completed",count:s.filter(w=>w.status==="completed").length}].map(w=>e.jsxs("button",{onClick:()=>m(w.key),className:`flex-1 px-4 py-3 rounded-xl font-semibold transition-all duration-200 flex items-center justify-center space-x-2 ${S===w.key?"bg-white text-gray-900 shadow-lg":"text-white/70 hover:text-white hover:bg-white/5"}`,children:[e.jsx("span",{children:w.label}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${S===w.key?"bg-gray-200 text-gray-700":"bg-white/20 text-white/80"}`,children:w.count})]},w.key))}),e.jsx(At,{filters:L,onUpdateFilter:u,onResetFilters:f,hasActiveFilters:A,totalResults:G,totalBounties:k.length,showFilters:g,onToggleFilters:()=>v(!g)}),j.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx(mt,{className:"w-16 h-16 text-white/40 mx-auto mb-6"}),e.jsxs("h3",{className:"text-xl font-bold text-white mb-3",children:["No ",S," bounties found"]}),e.jsx("p",{className:"text-white/60 body-text",children:A?"Try adjusting your search or filter criteria to find more bounties.":`No ${S} bounties available at the moment.`})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid gap-8",children:X.map(w=>e.jsx(Xe,{bounty:w,onApply:a,onViewDetails:l,onDeliver:n,hasApplied:r?.has(w.id),applicationStatus:o?.[w.id],submissionStatus:c?.[w.id],feedback:d?.[w.id]},w.id))}),e.jsx(Oe,{currentPage:U,totalPages:_,totalItems:R,itemsPerPage:x,onPageChange:H})]})]})},Pe=({bounty:s,isOpen:t,onClose:a,onApply:l})=>!t||!s?null:e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-3xl max-w-4xl w-full max-h-[90vh] overflow-y-auto shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between p-8 border-b border-gray-200",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:s.title}),e.jsxs("p",{className:"text-gray-600 font-medium",children:["By ",s.businessName]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center bg-gradient-to-r from-green-500 to-emerald-600 text-white px-6 py-3 rounded-2xl shadow-lg",children:[e.jsx(ve,{className:"w-6 h-6 mr-3"}),e.jsxs("span",{className:"font-bold text-2xl",children:["$",s.payment.amount]})]}),e.jsx("button",{onClick:a,className:"p-3 hover:bg-gray-100 rounded-2xl transition-all duration-300",children:e.jsx(ee,{className:"w-6 h-6 text-gray-600"})})]})]}),e.jsxs("div",{className:"p-8 space-y-10",children:[e.jsxs("section",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"Description"}),e.jsx("p",{className:"text-gray-700 leading-relaxed",children:s.description})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"Key Information"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx($e,{className:"w-6 h-6 mr-4 text-blue-500"}),e.jsx("span",{className:"font-medium",children:s.deadline?`Deadline: ${new Date(s.deadline).toLocaleDateString()}`:"No deadline specified"})]}),e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(he,{className:"w-6 h-6 mr-4 text-green-500"}),e.jsx("span",{className:"font-medium",children:s.maxCreators?`Goal: ${s.maxCreators} creators`:"Unlimited creators"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-500 mb-2",children:"Category"}),e.jsx("div",{className:"capitalize text-gray-900 font-bold",children:s.category})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-500 mb-2",children:"Status"}),e.jsx("div",{className:"capitalize text-gray-900 font-bold",children:s.status})]})]})]})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"Requirements"}),e.jsx("div",{className:"space-y-4",children:s.requirements.map(n=>e.jsxs("div",{className:"flex items-start space-x-4",children:[n.mandatory?e.jsx(Y,{className:"w-6 h-6 text-red-500 mt-1 flex-shrink-0"}):e.jsx(O,{className:"w-6 h-6 text-green-500 mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-900 font-medium",children:n.description}),e.jsxs("span",{className:"text-xs text-gray-500 ml-3 font-medium",children:["(",n.mandatory?"Required":"Optional",")"]})]})]},n.id))})]}),s.talkingPoints.length>0&&e.jsxs("section",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"Key Talking Points"}),e.jsx("ul",{className:"space-y-3",children:s.talkingPoints.map((n,r)=>e.jsxs("li",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"w-3 h-3 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-gray-700",children:n})]},r))})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"Payment Structure"}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-2xl p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("span",{className:"text-xl font-bold text-gray-900",children:["Total: $",s.payment.amount," ",s.payment.currency]})}),e.jsx("div",{className:"space-y-4",children:s.payment.milestones.map(n=>e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 pb-4 last:border-b-0",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-900 font-medium",children:n.description}),n.minimumViews&&e.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:["Minimum ",n.minimumViews.toLocaleString()," views required"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-bold text-gray-900 text-lg",children:["$",Math.round(s.payment.amount*(n.percentage/100))]}),e.jsxs("div",{className:"text-sm text-gray-600 font-medium",children:[n.percentage,"%"]})]})]},n.id))})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-8 border-t border-gray-200",children:[e.jsxs("div",{className:"text-sm text-gray-600 font-medium",children:[s.applicationsCount," applications submitted"]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{onClick:a,className:"px-8 py-4 bg-white text-gray-700 font-semibold rounded-2xl border border-gray-300 hover:bg-gray-50 transition-all duration-300",children:"Close"}),e.jsx("button",{onClick:()=>l(s.id),disabled:s.status!=="active",className:"px-8 py-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-semibold rounded-2xl shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300",children:"Apply for This Bounty"})]})]})]})}),B={MAX_FILE_SIZE:100*1024*1024,ALLOWED_TYPES:{IMAGE:["image/jpeg","image/png","image/gif","image/webp"],VIDEO:["video/mp4","video/avi","video/mov","video/wmv","video/webm"],AUDIO:["audio/mp3","audio/wav","audio/m4a","audio/aac"],DOCUMENT:["application/pdf","text/plain","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],ARCHIVE:["application/zip","application/rar","application/7z"]},MAX_FILES_PER_UPLOAD:10};class F{static validateFile(t){const a=[],l=[];return t.size>B.MAX_FILE_SIZE&&a.push(`File size exceeds maximum limit of ${B.MAX_FILE_SIZE/(1024*1024)}MB`),[...B.ALLOWED_TYPES.IMAGE,...B.ALLOWED_TYPES.VIDEO,...B.ALLOWED_TYPES.AUDIO,...B.ALLOWED_TYPES.DOCUMENT,...B.ALLOWED_TYPES.ARCHIVE].includes(t.type)||a.push(`File type ${t.type} is not allowed`),(t.name.toLowerCase().includes(".exe")||t.name.toLowerCase().includes(".bat"))&&a.push("Executable files are not allowed for security reasons"),t.size>50*1024*1024&&l.push("Large file detected - upload may take longer"),{isValid:a.length===0,errors:a,warnings:l}}static async uploadFile(t,a,l){return new Promise((n,r)=>{const o=this.validateFile(t);if(!o.isValid){r(new Error(`File validation failed: ${o.errors.join(", ")}`));return}const c=me(ue,`${a}/${Date.now()}_${t.name}`),d=_e(c,t);d.on("state_changed",x=>{const h=x.bytesTransferred/x.totalBytes*100;l?.(h,t.name)},x=>{console.error("Upload error:",x),r(x)},async()=>{try{const h={url:await ze(d.snapshot.ref),fileName:t.name,fileSize:t.size,fileType:t.type,uploadedAt:new Date,storagePath:d.snapshot.ref.fullPath};n(h)}catch(x){r(x)}})})}static async uploadMultipleFiles(t,a,l){const r=t.map(c=>this.validateFile(c)).filter(c=>!c.isValid);if(r.length>0)throw new Error(`Some files failed validation: ${r.map(c=>c.errors.join(", ")).join("; ")}`);if(t.length>B.MAX_FILES_PER_UPLOAD)throw new Error(`Maximum ${B.MAX_FILES_PER_UPLOAD} files allowed per upload`);const o=t.map(c=>this.uploadFile(c,a,l));return Promise.all(o)}static async deleteFile(t){try{const a=me(ue,t);await Ve(a),console.log("File deleted successfully:",t)}catch(a){throw console.error("Error deleting file:",a),a}}static async deleteMultipleFiles(t){const a=t.map(l=>this.deleteFile(l));await Promise.all(a)}static async getFileMetadata(t){try{const a=me(ue,t);return{path:t,exists:!0}}catch(a){throw console.error("Error getting file metadata:",a),a}}static async listFiles(t){try{const a=me(ue,t);return(await We(a)).items}catch(a){throw console.error("Error listing files:",a),a}}static async generateThumbnail(t){return new Promise(a=>{if(t.type.startsWith("image/")){const l=document.createElement("canvas"),n=l.getContext("2d"),r=new Image;r.onload=()=>{const c=Math.min(200/r.width,200/r.height);l.width=r.width*c,l.height=r.height*c,n?.drawImage(r,0,0,l.width,l.height);const d=l.toDataURL("image/jpeg",.8);a(d)},r.src=URL.createObjectURL(t)}else if(t.type.startsWith("video/")){const l=document.createElement("video"),n=document.createElement("canvas"),r=n.getContext("2d");l.onloadeddata=()=>{n.width=l.videoWidth,n.height=l.videoHeight,r?.drawImage(l,0,0);const o=n.toDataURL("image/jpeg",.8);a(o)},l.src=URL.createObjectURL(t),l.currentTime=.1}else a(null)})}static getFileTypeCategory(t){return B.ALLOWED_TYPES.IMAGE.includes(t)?"image":B.ALLOWED_TYPES.VIDEO.includes(t)?"video":B.ALLOWED_TYPES.AUDIO.includes(t)?"audio":B.ALLOWED_TYPES.DOCUMENT.includes(t)?"document":B.ALLOWED_TYPES.ARCHIVE.includes(t)?"archive":"other"}static formatFileSize(t){if(t===0)return"0 Bytes";const a=1024,l=["Bytes","KB","MB","GB"],n=Math.floor(Math.log(t)/Math.log(a));return parseFloat((t/Math.pow(a,n)).toFixed(2))+" "+l[n]}static getFileExtension(t){return t.split(".").pop()?.toLowerCase()||""}static isImage(t){return t.startsWith("image/")}static isVideo(t){return t.startsWith("video/")}static isAudio(t){return t.startsWith("audio/")}static isDocument(t){return B.ALLOWED_TYPES.DOCUMENT.includes(t)}}class Et{static async validateContent(t){const a=[],l=[],n=[];let r=100;if((!t.description||t.description.trim().length<10)&&(a.push({type:"error",category:"quality",message:"Description must be at least 10 characters long",severity:"medium",field:"description"}),r-=20),(!t.contentFiles||t.contentFiles.length===0)&&(a.push({type:"error",category:"quality",message:"At least one content file is required",severity:"high",field:"contentFiles"}),r-=30),t.contentFiles)for(const o of t.contentFiles)o.fileSize>100*1024*1024&&(a.push({type:"warning",category:"technical",message:`File ${o.fileName} is very large (${F.formatFileSize(o.fileSize)})`,severity:"medium",field:"contentFiles"}),r-=5),["image/jpeg","image/png","image/gif","image/webp","video/mp4","video/avi","video/mov","video/wmv","video/webm","audio/mp3","audio/wav","audio/m4a","audio/aac","application/pdf","text/plain"].includes(o.fileType)||(a.push({type:"error",category:"technical",message:`File type ${o.fileType} is not supported`,severity:"high",field:"contentFiles"}),r-=15);if(t.description){const o=t.description.trim();o.length<50&&(l.push("Consider providing a more detailed description"),r-=5),o.length>1e3&&(l.push("Description is quite long - consider being more concise"),r-=3),o.toLowerCase().includes("test")&&o.length<100&&(a.push({type:"warning",category:"quality",message:"Description appears to be a test submission",severity:"medium",field:"description"}),r-=10)}return r<70&&n.push("Please address the issues above before submitting"),t.contentFiles&&t.contentFiles.length===1&&n.push("Consider providing multiple content files for better review"),t.additionalNotes||n.push("Consider adding additional notes to provide context"),{isValid:r>=60,score:Math.max(0,r),issues:a,warnings:l,recommendations:n}}static async createReview(t,a,l,n,r,o,c,d=[]){const x={id:`${a}_${l}`,bountyId:t,submissionId:a,reviewerId:l,reviewerName:n,status:r,score:c,feedback:o,issues:d,createdAt:new Date,updatedAt:new Date};r==="approved"?x.approvedAt=new Date:r==="rejected"&&(x.rejectedAt=new Date);const h=oe($,"content_reviews",x.id);return await st(h,{...x,createdAt:Q(),updatedAt:Q(),approvedAt:x.approvedAt?Q():null,rejectedAt:x.rejectedAt?Q():null}),await this.updateSubmissionStatus(a,r,c,o,d),x.id}static async updateSubmissionStatus(t,a,l,n,r){const o=oe($,"submissions",t),c={status:a,updatedAt:Q()};l!==void 0&&(c.reviewScore=l),n&&(c.reviewFeedback=n),r&&(c.reviewIssues=r),a==="approved"?c.approvedAt=Q():a==="rejected"&&(c.rejectedAt=Q()),await ke(o,c)}static async getReview(t){try{const a=oe($,"content_reviews",t),l=await at(a);if(l.exists()){const n=l.data();return{id:l.id,bountyId:n.bountyId,submissionId:n.submissionId,reviewerId:n.reviewerId,reviewerName:n.reviewerName,status:n.status,score:n.score,feedback:n.feedback,issues:n.issues||[],approvedAt:n.approvedAt?.toDate(),rejectedAt:n.rejectedAt?.toDate(),createdAt:n.createdAt?.toDate()||new Date,updatedAt:n.updatedAt?.toDate()||new Date}}return null}catch(a){throw console.error("Error getting content review:",a),a}}static async getSubmissionReviews(t){try{const a=K($,"content_reviews"),l=se(a,ae("submissionId","==",t));return(await be(l)).docs.map(r=>{const o=r.data();return{id:r.id,bountyId:o.bountyId,submissionId:o.submissionId,reviewerId:o.reviewerId,reviewerName:o.reviewerName,status:o.status,score:o.score,feedback:o.feedback,issues:o.issues||[],approvedAt:o.approvedAt?.toDate(),rejectedAt:o.rejectedAt?.toDate(),createdAt:o.createdAt?.toDate()||new Date,updatedAt:o.updatedAt?.toDate()||new Date}})}catch(a){throw console.error("Error getting submission reviews:",a),a}}static async getPendingReviews(t){try{const a=K($,"content_reviews"),l=se(a,ae("reviewerId","==",t),ae("status","in",["pending_review","under_review"]));return(await be(l)).docs.map(r=>{const o=r.data();return{id:r.id,bountyId:o.bountyId,submissionId:o.submissionId,reviewerId:o.reviewerId,reviewerName:o.reviewerName,status:o.status,score:o.score,feedback:o.feedback,issues:o.issues||[],approvedAt:o.approvedAt?.toDate(),rejectedAt:o.rejectedAt?.toDate(),createdAt:o.createdAt?.toDate()||new Date,updatedAt:o.updatedAt?.toDate()||new Date}})}catch(a){throw console.error("Error getting pending reviews:",a),a}}static async updateReview(t,a){try{const l=oe($,"content_reviews",t);await ke(l,{...a,updatedAt:Q()})}catch(l){throw console.error("Error updating review:",l),l}}static async autoValidateContent(t){const a=[],l=[],n=[];let r=100;return(!t.description||t.description.trim().length<10)&&(a.push({type:"error",category:"quality",message:"Description too short",severity:"medium"}),r-=20),(!t.contentFiles||t.contentFiles.length===0)&&(a.push({type:"error",category:"quality",message:"No content files provided",severity:"high"}),r-=30),t.description&&["test","placeholder","dummy","sample"].some(d=>t.description.toLowerCase().includes(d))&&(a.push({type:"warning",category:"quality",message:"Content appears to be test/placeholder content",severity:"medium"}),r-=15),{isValid:r>=60,score:Math.max(0,r),issues:a,warnings:l,recommendations:n}}static async getReviewStats(t){try{const a=K($,"content_reviews");let l=se(a);t&&(l=se(a,ae("reviewerId","==",t)));const r=(await be(l)).docs.map(c=>c.data());return{total:r.length,pending:r.filter(c=>c.status==="pending_review").length,underReview:r.filter(c=>c.status==="under_review").length,approved:r.filter(c=>c.status==="approved").length,rejected:r.filter(c=>c.status==="rejected").length,requiresChanges:r.filter(c=>c.status==="requires_changes").length,averageScore:r.length>0?r.reduce((c,d)=>c+(d.score||0),0)/r.length:0}}catch(a){throw console.error("Error getting review stats:",a),a}}}const Lt=({onFilesUploaded:s,onFilesRemoved:t,maxFiles:a=10,maxFileSize:l=100*1024*1024,allowedTypes:n,uploadPath:r="content",className:o="",disabled:c=!1})=>{const[d,x]=y.useState(!1),[h,g]=y.useState(!1),[v,S]=y.useState({}),[m,k]=y.useState({}),[L,j]=y.useState([]),u=y.useRef(null),f=y.useCallback(async N=>{if(N.length!==0){if(L.length+N.length>a){alert(`Maximum ${a} files allowed`);return}g(!0),k({});try{const C=[],P={};for(const i of N){const b=F.validateFile(i);if(!b.isValid){P[i.name]=b.errors.join(", ");continue}if(l&&i.size>l){P[i.name]=`File size exceeds ${F.formatFileSize(l)}`;continue}if(n&&!n.includes(i.type)){P[i.name]=`File type ${i.type} is not allowed`;continue}C.push(i)}if(Object.keys(P).length>0&&(k(P),console.error("File validation errors:",P)),C.length===0){g(!1);return}const z=(i,b)=>{S(D=>({...D,[b]:i}))},J=(await F.uploadMultipleFiles(C,r,z)).map((i,b)=>({id:`${Date.now()}_${b}`,url:i.url,fileName:i.fileName,fileSize:i.fileSize,fileType:i.fileType,uploadedAt:i.uploadedAt,storagePath:i.storagePath}));j(i=>[...i,...J]),S({}),s(J)}catch(C){console.error("Upload error:",C),alert(`Upload failed: ${C instanceof Error?C.message:"Unknown error"}`)}finally{g(!1)}}},[L.length,a,l,n,r,s]),A=y.useCallback(N=>{N.preventDefault(),c||x(!0)},[c]),G=y.useCallback(N=>{N.preventDefault(),x(!1)},[]),U=y.useCallback(N=>{if(N.preventDefault(),x(!1),c)return;const C=Array.from(N.dataTransfer.files);f(C)},[c,f]),_=y.useCallback(N=>{const C=Array.from(N.target.files||[]);f(C)},[f]),R=y.useCallback(N=>{const C=L.find(P=>P.id===N);C&&(j(P=>P.filter(z=>z.id!==N)),t?.([N]),F.deleteFile(C.storagePath).catch(P=>{console.error("Error deleting file from storage:",P)}))},[L,t]),X=N=>F.isImage(N)?e.jsx(Re,{className:"w-5 h-5"}):F.isVideo(N)?e.jsx(Me,{className:"w-5 h-5"}):F.isAudio(N)?e.jsx(Ne,{className:"w-5 h-5"}):F.isDocument(N)?e.jsx(re,{className:"w-5 h-5"}):e.jsx(we,{className:"w-5 h-5"}),H=()=>e.jsxs("div",{className:`
        relative border-2 border-dashed rounded-lg p-8 text-center transition-colors duration-200
        ${d?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}
        ${c?"opacity-50 cursor-not-allowed":"cursor-pointer"}
      `,onDragOver:A,onDragLeave:G,onDrop:U,onClick:()=>!c&&u.current?.click(),children:[e.jsx(ut,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:d?"Drop files here":"Upload files"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Drag and drop files here, or click to select files"}),e.jsxs("div",{className:"text-sm text-gray-500 space-y-1",children:[e.jsxs("p",{children:["Maximum ",a," files"]}),e.jsxs("p",{children:["Maximum file size: ",F.formatFileSize(l)]}),n&&e.jsxs("p",{children:["Allowed types: ",n.join(", ")]})]}),e.jsx("input",{ref:u,type:"file",multiple:!0,className:"hidden",onChange:_,accept:n?.join(","),disabled:c})]}),w=()=>{const N=Object.keys(v);return N.length===0?null:e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Uploading files..."}),N.map(C=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(xt,{className:"w-4 h-4 text-blue-500 animate-spin"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:C}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-1",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${v[C]}%`}})})]}),e.jsxs("span",{className:"text-xs text-gray-500",children:[Math.round(v[C]),"%"]})]},C))]})},Z=()=>{const N=Object.keys(m);return N.length===0?null:e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-red-900",children:"Upload errors:"}),N.map(C=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-red-50 rounded-lg",children:[e.jsx(Y,{className:"w-4 h-4 text-red-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-red-900",children:C}),e.jsx("p",{className:"text-xs text-red-700",children:m[C]})]})]},C))]})},I=()=>L.length===0?null:e.jsxs("div",{className:"mt-4",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:["Uploaded files (",L.length,"/",a,")"]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:L.map(N=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-green-50 rounded-lg",children:[e.jsx(O,{className:"w-4 h-4 text-green-500"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[X(N.fileType),e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:N.fileName})]}),e.jsx("p",{className:"text-xs text-gray-500",children:F.formatFileSize(N.fileSize)})]}),e.jsx("button",{onClick:()=>R(N.id),className:"p-1 text-gray-400 hover:text-red-500 transition-colors",children:e.jsx(ee,{className:"w-4 h-4"})})]},N.id))})]});return e.jsxs("div",{className:o,children:[H(),w(),Z(),I()]})},Pt=({files:s,onRemoveFile:t,showRemoveButton:a=!1,maxPreviewSize:l=300,className:n=""})=>{const[r,o]=y.useState(null),[c,d]=y.useState({}),x=m=>{d(k=>({...k,[m]:{playing:!k[m]?.playing,muted:k[m]?.muted||!1}}))},h=m=>{d(k=>({...k,[m]:{playing:k[m]?.playing||!1,muted:!k[m]?.muted}}))},g=m=>F.isImage(m)?e.jsx(Re,{className:"w-5 h-5"}):F.isVideo(m)?e.jsx(Me,{className:"w-5 h-5"}):F.isAudio(m)?e.jsx(Ne,{className:"w-5 h-5"}):F.isDocument(m)?e.jsx(re,{className:"w-5 h-5"}):e.jsx(we,{className:"w-5 h-5"}),v=m=>{const k=F.isImage(m.fileType),L=F.isVideo(m.fileType),j=F.isAudio(m.fileType),u=F.isDocument(m.fileType);if(k)return e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:m.url,alt:m.fileName,className:"w-full h-full object-cover rounded-lg cursor-pointer",onClick:()=>o(m)}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-all duration-200 rounded-lg flex items-center justify-center",children:e.jsx(Ae,{className:"w-6 h-6 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-200"})})]});if(L){const f=c[m.id]||{playing:!1,muted:!0};return e.jsxs("div",{className:"relative group",children:[e.jsx("video",{src:m.url,className:"w-full h-full object-cover rounded-lg",muted:f.muted,loop:!0,onPlay:()=>d(A=>({...A,[m.id]:{...A[m.id],playing:!0}})),onPause:()=>d(A=>({...A,[m.id]:{...A[m.id],playing:!1}}))}),e.jsxs("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-all duration-200 rounded-lg flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>x(m.id),className:"p-2 bg-black bg-opacity-50 rounded-full text-white opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:f.playing?e.jsx(Fe,{className:"w-4 h-4"}):e.jsx(Ce,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>h(m.id),className:"p-2 bg-black bg-opacity-50 rounded-full text-white opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:f.muted?e.jsx(De,{className:"w-4 h-4"}):e.jsx(Ee,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>o(m),className:"p-2 bg-black bg-opacity-50 rounded-full text-white opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:e.jsx(Ae,{className:"w-4 h-4"})})]})]})}if(j){const f=c[m.id]||{playing:!1,muted:!1};return e.jsxs("div",{className:"relative group",children:[e.jsx("audio",{src:m.url,className:"w-full",muted:f.muted,onPlay:()=>d(A=>({...A,[m.id]:{...A[m.id],playing:!0}})),onPause:()=>d(A=>({...A,[m.id]:{...A[m.id],playing:!1}}))}),e.jsxs("div",{className:"bg-gray-100 rounded-lg p-4 flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>x(m.id),className:"p-2 bg-blue-500 rounded-full text-white",children:f.playing?e.jsx(Fe,{className:"w-4 h-4"}):e.jsx(Ce,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>h(m.id),className:"p-2 bg-gray-500 rounded-full text-white",children:f.muted?e.jsx(De,{className:"w-4 h-4"}):e.jsx(Ee,{className:"w-4 h-4"})}),e.jsx("span",{className:"text-sm text-gray-600",children:m.fileName})]})]})}return u?e.jsx("div",{className:"bg-gray-100 rounded-lg p-4 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(re,{className:"w-8 h-8 text-gray-500 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600 font-medium",children:m.fileName}),e.jsx("p",{className:"text-xs text-gray-500",children:F.formatFileSize(m.fileSize)})]})}):e.jsx("div",{className:"bg-gray-100 rounded-lg p-4 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(we,{className:"w-8 h-8 text-gray-500 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600 font-medium",children:m.fileName}),e.jsx("p",{className:"text-xs text-gray-500",children:F.formatFileSize(m.fileSize)})]})})},S=m=>e.jsx("div",{className:"relative group",children:e.jsxs("div",{className:"relative overflow-hidden rounded-lg border border-gray-200 hover:border-gray-300 transition-colors duration-200",style:{height:l},children:[v(m),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-3",children:e.jsxs("div",{className:"flex items-center justify-between text-white",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[g(m.fileType),e.jsx("span",{className:"text-sm font-medium truncate",children:m.fileName})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-xs",children:F.formatFileSize(m.fileSize)}),e.jsx("a",{href:m.url,target:"_blank",rel:"noopener noreferrer",className:"p-1 hover:bg-white/20 rounded transition-colors",children:e.jsx(Se,{className:"w-3 h-3"})}),e.jsx("a",{href:m.url,download:m.fileName,className:"p-1 hover:bg-white/20 rounded transition-colors",children:e.jsx(Ie,{className:"w-3 h-3"})})]})]})}),a&&t&&e.jsx("button",{onClick:()=>t(m.id),className:"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:e.jsx(ee,{className:"w-3 h-3"})})]})},m.id);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 ${n}`,children:s.map(S)}),r&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"relative max-w-4xl max-h-full",children:[e.jsx("button",{onClick:()=>o(null),className:"absolute top-4 right-4 p-2 bg-black bg-opacity-50 text-white rounded-full hover:bg-opacity-70 transition-colors",children:e.jsx(ee,{className:"w-6 h-6"})}),e.jsxs("div",{className:"max-w-full max-h-full overflow-auto",children:[F.isImage(r.fileType)&&e.jsx("img",{src:r.url,alt:r.fileName,className:"max-w-full max-h-full object-contain"}),F.isVideo(r.fileType)&&e.jsx("video",{src:r.url,controls:!0,className:"max-w-full max-h-full",autoPlay:!0}),F.isAudio(r.fileType)&&e.jsxs("div",{className:"bg-white rounded-lg p-8 text-center",children:[e.jsx(Ne,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("audio",{src:r.url,controls:!0,className:"w-full",autoPlay:!0}),e.jsx("p",{className:"mt-4 text-lg font-medium",children:r.fileName})]}),F.isDocument(r.fileType)&&e.jsxs("div",{className:"bg-white rounded-lg p-8 text-center",children:[e.jsx(re,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-medium mb-2",children:r.fileName}),e.jsx("p",{className:"text-gray-600 mb-4",children:F.formatFileSize(r.fileSize)}),e.jsxs("a",{href:r.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:[e.jsx(Se,{className:"w-4 h-4"}),"Open Document"]})]})]})]})})]})},Te=({bounty:s,isOpen:t,onClose:a,onSuccess:l,existingSubmissionId:n})=>{const{user:r}=ge(),[o,c]=y.useState(!1),[d,x]=y.useState({contentLinks:"",description:"",additionalNotes:"",contentFiles:[]}),[h,g]=y.useState({}),[v,S]=y.useState(null);if(!t||!s)return null;const m=u=>{x(f=>({...f,contentFiles:[...f.contentFiles,...u]}))},k=u=>{x(f=>({...f,contentFiles:f.contentFiles.filter(A=>!u.includes(A.id))}))},L=async()=>{const u={};if(!d.contentLinks.trim()&&d.contentFiles.length===0&&(u.content="Either content links or uploaded files are required"),d.description.trim()||(u.description="Description is required"),g(u),Object.keys(u).length===0)try{const f=await Et.validateContent({description:d.description,contentFiles:d.contentFiles,additionalNotes:d.additionalNotes});return S(f),f.isValid}catch(f){return console.error("Content validation error:",f),!0}return!1},j=async u=>{if(u.preventDefault(),!!await L()){if(!r?.id){alert("You must be logged in to submit content");return}c(!0);try{const f={bountyId:s.id,creatorId:r.id,creatorName:r.email||"Anonymous",contentLinks:d.contentLinks,description:d.description,additionalNotes:d.additionalNotes,contentFiles:d.contentFiles,submittedAt:new Date().toISOString(),status:"pending_review"};n?(await q.updateSubmissionStatus(n,"pending_review"),await q.updateSubmissionContent(n,{contentLinks:d.contentLinks,description:d.description,additionalNotes:d.additionalNotes,submittedAt:new Date().toISOString()})):await q.createSubmission(f),alert("✅ Content delivered successfully! The business will review your submission."),l?.(),a(),x({contentLinks:"",description:"",additionalNotes:"",contentFiles:[]}),S(null)}catch(f){console.error("Error submitting content:",f),alert("❌ Failed to submit content. Please try again.")}finally{c(!1)}}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Deliver Content"}),e.jsxs("p",{className:"text-gray-600 mt-1",children:["Submit your content for: ",s.title]})]}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ee,{className:"w-6 h-6 text-gray-500"})})]}),e.jsxs("form",{onSubmit:j,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Content Links"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ht,{className:"w-5 h-5 text-gray-400"}),e.jsx("textarea",{value:d.contentLinks,onChange:u=>x(f=>({...f,contentLinks:u.target.value})),placeholder:"Paste your video/content URLs here (YouTube, TikTok, Instagram, etc.)",className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent ${h.contentLinks?"border-red-300":"border-gray-300"}`,rows:3})]}),h.contentLinks&&e.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(Y,{className:"w-4 h-4 mr-1"}),h.contentLinks]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Upload Content Files"}),e.jsx(Lt,{onFilesUploaded:m,onFilesRemoved:k,maxFiles:10,maxFileSize:100*1024*1024,allowedTypes:["image/jpeg","image/png","image/gif","image/webp","video/mp4","video/avi","video/mov","video/wmv","video/webm","audio/mp3","audio/wav","audio/m4a","audio/aac","application/pdf","text/plain"],uploadPath:`bounties/${s.id}/submissions`})]}),d.contentFiles.length>0&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Content Preview (",d.contentFiles.length," files)"]}),e.jsx(Pt,{files:d.contentFiles,onRemoveFile:u=>k([u]),showRemoveButton:!0,maxPreviewSize:150})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Description ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(re,{className:"w-5 h-5 text-gray-400 mt-3"}),e.jsx("textarea",{value:d.description,onChange:u=>x(f=>({...f,description:u.target.value})),placeholder:"Describe your content, how it meets the requirements, and any key highlights...",className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent ${h.description?"border-red-300":"border-gray-300"}`,rows:4})]}),h.description&&e.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(Y,{className:"w-4 h-4 mr-1"}),h.description]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Additional Notes"}),e.jsx("textarea",{value:d.additionalNotes,onChange:u=>x(f=>({...f,additionalNotes:u.target.value})),placeholder:"Any additional information, context, or special instructions...",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3})]}),v&&e.jsxs("div",{className:`border rounded-xl p-4 ${v.isValid?"border-green-200 bg-green-50":"border-yellow-200 bg-yellow-50"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[v.isValid?e.jsx(O,{className:"w-5 h-5 text-green-600"}):e.jsx(Y,{className:"w-5 h-5 text-yellow-600"}),e.jsxs("h4",{className:"font-semibold text-gray-900",children:["Content Quality Score: ",v.score,"/100"]})]}),v.issues.length>0&&e.jsxs("div",{className:"mb-3",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-1",children:"Issues to address:"}),e.jsx("ul",{className:"text-sm text-gray-600 space-y-1",children:v.issues.map((u,f)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-red-500",children:"•"}),e.jsx("span",{children:u.message})]},f))})]}),v.warnings.length>0&&e.jsxs("div",{className:"mb-3",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-1",children:"Warnings:"}),e.jsx("ul",{className:"text-sm text-gray-600 space-y-1",children:v.warnings.map((u,f)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-yellow-500",children:"•"}),e.jsx("span",{children:u})]},f))})]}),v.recommendations.length>0&&e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-1",children:"Recommendations:"}),e.jsx("ul",{className:"text-sm text-gray-600 space-y-1",children:v.recommendations.map((u,f)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-500",children:"•"}),e.jsx("span",{children:u})]},f))})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:[e.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Bounty Requirements:"}),e.jsx("ul",{className:"text-sm text-blue-800 space-y-1",children:s.requirements.map((u,f)=>e.jsxs("li",{className:"flex items-center",children:[e.jsx(O,{className:"w-4 h-4 mr-2 text-blue-600"}),u.description]},f))})]}),e.jsxs("div",{className:"flex space-x-4 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:a,className:"flex-1 px-6 py-3 border border-gray-300 text-gray-700 font-semibold rounded-xl hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:o,className:"flex-1 px-6 py-3 bg-gradient-to-r from-green-600 to-emerald-600 text-white font-semibold rounded-xl hover:shadow-lg transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",children:o?"Submitting...":"Deliver Content"})]})]})]})})},Be=({isOpen:s,onClose:t,onSubmit:a,action:l,submissionTitle:n})=>{const[r,o]=y.useState(""),[c,d]=y.useState(!1);if(!s)return null;const h=(()=>{switch(l){case"approve":return{title:"Approve Submission",icon:e.jsx(O,{className:"w-6 h-6 text-green-600"}),color:"green",placeholder:"Optional: Add a note of appreciation or specific feedback...",buttonText:"Approve & Pay",buttonColor:"bg-green-600 hover:bg-green-700"};case"reject":return{title:"Reject Submission",icon:e.jsx(Y,{className:"w-6 h-6 text-red-600"}),color:"red",placeholder:"Please explain why this submission was rejected and what needs to be improved...",buttonText:"Reject Submission",buttonColor:"bg-red-600 hover:bg-red-700",required:!0};case"request-changes":return{title:"Request Changes",icon:e.jsx(pt,{className:"w-6 h-6 text-orange-600"}),color:"orange",placeholder:"Please specify what changes are needed and provide clear instructions...",buttonText:"Request Changes",buttonColor:"bg-orange-600 hover:bg-orange-700",required:!0}}})(),g=async v=>{if(v.preventDefault(),h.required&&!r.trim()){alert("Feedback is required for this action");return}d(!0);try{await a(r.trim()),t(),o("")}catch(S){console.error("Error submitting feedback:",S),alert("Failed to submit feedback. Please try again.")}finally{d(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-md w-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[h.icon,e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:h.title}),n&&e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["for: ",n]})]})]}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ee,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("form",{onSubmit:g,className:"p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Feedback ",h.required&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:r,onChange:v=>o(v.target.value),placeholder:h.placeholder,className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-${h.color}-500 focus:border-transparent ${h.required&&!r.trim()?"border-red-300":"border-gray-300"}`,rows:4,required:h.required}),h.required&&!r.trim()&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:"Feedback is required for this action"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 font-semibold rounded-xl hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:c||h.required&&!r.trim(),className:`flex-1 px-4 py-3 text-white font-semibold rounded-xl transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${h.buttonColor}`,children:c?"Submitting...":h.buttonText})]})]})]})})},Tt=()=>{const s=y.useContext(Qe);if(s===void 0)throw new Error("useNotification must be used within a NotificationProvider");return s},Bt=({bountyId:s,onClose:t,onSubmissionUpdated:a})=>{const{showCelebration:l}=Tt(),[n,r]=y.useState([]),[o,c]=y.useState(!0),[d,x]=y.useState(null),[h,g]=y.useState({isOpen:!1,action:"approve",submission:null});y.useEffect(()=>{(async()=>{try{c(!0),console.log("🔍 Fetching submissions for bounty:",s);const u=await q.getBountySubmissions(s);console.log("📤 Fetched submissions:",u),r(u)}catch(u){console.error("Error fetching submissions:",u)}finally{c(!1)}})()},[s]);const v=(j,u)=>{g({isOpen:!0,action:u,submission:j})},S=()=>{g({isOpen:!1,action:"approve",submission:null})},m=async j=>{if(h.submission)try{const u=h.action==="approve"?"approved":h.action==="reject"?"rejected":"requires_changes";await q.updateSubmissionStatus(h.submission.id,u,j),r(f=>f.map(A=>A.id===h.submission.id?{...A,status:u,feedback:j,reviewedAt:new Date().toISOString()}:A)),a?.(),alert(`Submission ${h.action==="approve"?"approved":h.action==="reject"?"rejected":"changes requested"} successfully!`)}catch(u){throw console.error("Error updating submission:",u),u}},k=j=>{switch(j){case"submitted":return"bg-blue-100 text-blue-700 border-blue-300";case"approved":return"bg-green-100 text-green-700 border-green-300";case"rejected":return"bg-red-100 text-red-700 border-red-300";case"requires_changes":return"bg-orange-100 text-orange-700 border-orange-300";default:return"bg-gray-100 text-gray-700 border-gray-300"}},L=j=>{switch(j){case"submitted":return e.jsx(ce,{className:"w-4 h-4"});case"approved":return e.jsx(O,{className:"w-4 h-4"});case"rejected":return e.jsx(pe,{className:"w-4 h-4"});case"requires_changes":return e.jsx(Y,{className:"w-4 h-4"});default:return e.jsx(ce,{className:"w-4 h-4"})}};return o?e.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:[e.jsx("div",{className:"bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"text-center",children:"Loading submissions..."})})}),e.jsx(Be,{isOpen:h.isOpen,onClose:S,onSubmit:m,action:h.action,submissionTitle:h.submission?.creatorName})]}):e.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:[e.jsxs("div",{className:"bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Content Submissions"}),e.jsxs("p",{className:"text-gray-600 mt-1",children:[n.length," submission",n.length!==1?"s":""," received"]})]}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(pe,{className:"w-6 h-6 text-gray-500"})})]}),e.jsx("div",{className:"p-6",children:n.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ce,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No submissions yet"}),e.jsx("p",{className:"text-gray-600",children:"Creators will appear here once they submit their content for this bounty."})]}):e.jsx("div",{className:"space-y-6",children:n.map(j=>e.jsxs("div",{className:"border border-gray-200 rounded-xl p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`px-3 py-1 rounded-full text-sm font-semibold border ${k(j.status)}`,children:e.jsxs("span",{className:"flex items-center space-x-1",children:[L(j.status),e.jsx("span",{className:"capitalize",children:j.status.replace("_"," ")})]})}),e.jsxs("span",{className:"text-sm text-gray-500",children:["Submitted ",new Date(j.submittedAt).toLocaleDateString()]})]})}),e.jsx("div",{className:"mb-4",children:e.jsxs("h4",{className:"font-semibold text-gray-900 mb-1",children:["Creator: ",j.creatorName]})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h5",{className:"font-medium text-gray-700 mb-2",children:"Content Links:"}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-3",children:e.jsx("p",{className:"text-sm text-gray-800 whitespace-pre-wrap",children:j.contentLinks})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h5",{className:"font-medium text-gray-700 mb-2",children:"Description:"}),e.jsx("p",{className:"text-sm text-gray-800",children:j.description})]}),j.additionalNotes&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h5",{className:"font-medium text-gray-700 mb-2",children:"Additional Notes:"}),e.jsx("p",{className:"text-sm text-gray-800",children:j.additionalNotes})]}),j.contentFiles&&j.contentFiles.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("h5",{className:"font-medium text-gray-700 mb-2",children:["Content Files (",j.contentFiles.length,"):"]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:j.contentFiles.map((u,f)=>e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(Ie,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 truncate",children:u.fileName})]}),e.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[e.jsxs("div",{children:[(u.fileSize/1024/1024).toFixed(2)," MB"]}),e.jsx("div",{className:"capitalize",children:u.fileType.split("/")[1]})]}),u.url&&e.jsxs("a",{href:u.url,target:"_blank",rel:"noopener noreferrer",className:"inline-block mt-2 text-xs text-blue-600 hover:text-blue-800",children:[e.jsx(Se,{className:"w-3 h-3 inline mr-1"}),"View File"]})]},f))})]}),j.status==="submitted"&&e.jsxs("div",{className:"flex space-x-3 pt-4 border-t border-gray-200",children:[e.jsxs("button",{onClick:()=>v(j,"approve"),className:"flex-1 px-4 py-2 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center space-x-2",children:[e.jsx(O,{className:"w-4 h-4"}),e.jsx("span",{children:"Approve"})]}),e.jsxs("button",{onClick:()=>v(j,"request-changes"),className:"flex-1 px-4 py-2 bg-orange-600 text-white font-semibold rounded-lg hover:bg-orange-700 transition-colors flex items-center justify-center space-x-2",children:[e.jsx(Y,{className:"w-4 h-4"}),e.jsx("span",{children:"Request Changes"})]}),e.jsxs("button",{onClick:()=>v(j,"reject"),className:"flex-1 px-4 py-2 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700 transition-colors flex items-center justify-center space-x-2",children:[e.jsx(pe,{className:"w-4 h-4"}),e.jsx("span",{children:"Reject"})]})]})]},j.id))})})]}),e.jsx(Be,{isOpen:h.isOpen,onClose:S,onSubmit:m,action:h.action,submissionTitle:h.submission?.creatorName})]})},je=({bounties:s,onViewDetails:t,itemsPerPage:a=3,onBountyUpdated:l})=>{const{user:n}=ge(),[r,o]=y.useState(null),[c,d]=y.useState("overview"),[x,h]=y.useState({}),[g,v]=y.useState(!1),[S,m]=y.useState(!1),[k,L]=y.useState(null),[j,u]=y.useState({}),[f,A]=y.useState(!1),{currentPage:G,totalPages:U,totalItems:_,paginatedItems:R,goToPage:X}=Ue(s,{itemsPerPage:a});y.useEffect(()=>{const i=async()=>{v(!0),A(!0);const b={},D={};try{for(const E of R){const V=await q.getBountyApplications(E.id);b[E.id]=V;const W=await q.getBountySubmissions(E.id);D[E.id]=W}h(b),u(D)}catch(E){console.error("Error fetching data:",E)}finally{v(!1),A(!1)}};R.length>0&&i()},[R]);const H=i=>{switch(i){case"active":return"bg-green-500 text-white";case"in-progress":return"bg-yellow-500 text-white";case"completed":return"bg-blue-500 text-white";case"pending":return"bg-gray-500 text-white";default:return"bg-gray-500 text-white"}},w=i=>{switch(i){case"approved":return"bg-green-500 text-white";case"rejected":return"bg-red-500 text-white";case"pending":return"bg-yellow-500 text-white";default:return"bg-gray-500 text-white"}},Z=async(i,b)=>{try{await q.updateApplicationStatus(b,"accepted"),h(D=>({...D,[i]:D[i]?.map(E=>E.id===b?{...E,status:"accepted",reviewedAt:new Date().toISOString()}:E)||[]})),alert("Application approved successfully!")}catch(D){console.error("Error approving application:",D),alert("Failed to approve application. Please try again.")}},I=async(i,b)=>{try{await q.updateApplicationStatus(b,"rejected"),h(D=>({...D,[i]:D[i]?.map(E=>E.id===b?{...E,status:"rejected",reviewedAt:new Date().toISOString()}:E)||[]})),alert("Application rejected successfully!")}catch(D){console.error("Error rejecting application:",D),alert("Failed to reject application. Please try again.")}},N=i=>{L(i),m(!0)},C=()=>{m(!1),L(null)},P=async i=>{try{const b=await q.getBountySubmissions(i);u(D=>({...D,[i]:b}))}catch(b){console.error("Error refreshing submissions:",b)}},z=i=>{console.log("Edit bounty:",i),alert("Edit bounty functionality coming soon!")},ne=async i=>{if(confirm("Are you sure you want to delete this bounty? This action cannot be undone."))try{await q.deleteBounty(i),alert("Bounty deleted successfully!"),l?.()}catch(b){console.error("Error deleting bounty:",b),alert("Failed to delete bounty. Please try again.")}},J=async i=>{if(!n?.id||!n?.email){alert("Please log in to fund this bounty.");return}const b=s.find(p=>p.id===i);if(!b){alert("Bounty not found.");return}const D=b.payment.amount,E=b.maxCreators||1,V=D*E,W=V*.05,T=V+W;if(confirm(`Fund this bounty for $${T.toFixed(2)} total ($${D} per creator × ${E} creators + $${W.toFixed(2)} platform fee) and make it live on the marketplace?`))try{console.log("Creating escrow payment for bounty:",i),console.log(`Per-creator amount: $${D}, Max creators: ${E}, Total bounty: $${V}, Platform fee: $${W.toFixed(2)}, Total payment: $${T.toFixed(2)}`);const p=Math.round(T*100);await Ke.createEscrowPayment(i,n.id,p,n.email)}catch(p){console.error("Error creating payment for bounty:",p),alert("Failed to process payment. Please try again.")}};return e.jsxs("div",{className:"space-y-8",children:[U>1&&e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",R.length," of ",_," bounties"]})}),R.map(i=>e.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("span",{className:`px-3 py-1.5 rounded-full text-xs font-bold ${H(i.status)}`,children:i.status}),e.jsx("span",{className:"px-3 py-1.5 rounded-full text-xs font-bold bg-blue-100 text-blue-800",children:i.category})]}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-3",children:i.title}),e.jsx("p",{className:"text-gray-600 text-sm leading-relaxed line-clamp-2",children:i.description})]}),e.jsxs("div",{className:"flex items-center space-x-4 ml-6",children:[e.jsxs("div",{className:"flex flex-col items-center bg-gradient-to-r from-green-500 to-emerald-600 text-white px-6 py-4 rounded-2xl shadow-lg",children:[e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx(ve,{className:"w-6 h-6 mr-2"}),e.jsxs("span",{className:"font-bold text-2xl",children:["$",i.payment.amount]})]}),i.maxCreators&&i.maxCreators>1&&e.jsx("span",{className:"text-sm opacity-90",children:"per creator"})]}),i.status==="pending"&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>z(i.id),className:"p-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors duration-200 group",title:"Edit bounty",children:e.jsx(gt,{className:"w-5 h-5 group-hover:scale-110 transition-transform"})}),e.jsx("button",{onClick:()=>ne(i.id),className:"p-3 bg-red-600 text-white rounded-xl hover:bg-red-700 transition-colors duration-200 group",title:"Delete bounty",children:e.jsx(bt,{className:"w-5 h-5 group-hover:scale-110 transition-transform"})}),e.jsx("button",{onClick:()=>J(i.id),className:"p-3 bg-green-600 text-white rounded-xl hover:bg-green-700 transition-colors duration-200 group",title:"Pay & Fund bounty to make it live on marketplace",children:e.jsx(yt,{className:"w-5 h-5 group-hover:scale-110 transition-transform"})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-xl",children:[e.jsx(he,{className:"w-6 h-6 mx-auto mb-2 text-blue-500"}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:i.applicationsCount}),e.jsx("div",{className:"text-sm text-gray-600",children:"Applications"})]}),e.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-xl",children:[e.jsx(O,{className:"w-6 h-6 mx-auto mb-2 text-green-500"}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:x[i.id]?.filter(b=>b.status==="accepted").length||0}),e.jsx("div",{className:"text-sm text-gray-600",children:"Approved"})]}),e.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-xl",children:[e.jsx(Ce,{className:"w-6 h-6 mx-auto mb-2 text-yellow-500"}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:j[i.id]?.filter(b=>b.status==="submitted").length||0}),e.jsx("div",{className:"text-sm text-gray-600",children:"Pending Review"})]}),e.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-xl",children:[e.jsx(ft,{className:"w-6 h-6 mx-auto mb-2 text-purple-500"}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:j[i.id]?.filter(b=>b.status==="approved").length||0}),e.jsx("div",{className:"text-sm text-gray-600",children:"Completed"})]})]}),e.jsx("div",{className:"border-b border-gray-200 mb-6",children:e.jsxs("nav",{className:"flex space-x-8",children:[e.jsx("button",{onClick:()=>d("overview"),className:`py-2 px-1 border-b-2 font-medium text-sm ${c==="overview"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Overview"}),e.jsxs("button",{onClick:()=>d("applications"),className:`py-2 px-1 border-b-2 font-medium text-sm ${c==="applications"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:["Applications & Submissions (",x[i.id]?.length||0,")"]})]})}),e.jsxs("div",{className:"min-h-[300px]",children:[c==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Key Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx($e,{className:"w-4 h-4 mr-3 text-blue-500"}),e.jsxs("span",{children:["Deadline: ",i.deadline?new Date(i.deadline).toLocaleDateString():"No deadline"]})]}),e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(he,{className:"w-4 h-4 mr-3 text-green-500"}),e.jsxs("span",{children:["Goal: ",i.maxCreators||"Unlimited"," creators"]}),i.maxCreators&&e.jsx("span",{className:`ml-2 px-2 py-1 rounded-full text-xs font-medium ${i.applicationsCount>=i.maxCreators?"bg-green-100 text-green-800":i.applicationsCount>=i.maxCreators*.8?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"}`,children:i.applicationsCount>=i.maxCreators?"Goal Reached!":`${i.applicationsCount}/${i.maxCreators}`})]}),i.maxApplications&&e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(qe,{className:"w-4 h-4 mr-3 text-orange-500"}),e.jsxs("span",{children:["Applications: ",i.applicationsCount,"/",i.maxApplications]}),e.jsx("span",{className:`ml-2 px-2 py-1 rounded-full text-xs font-medium ${i.applicationsCount>=i.maxApplications?"bg-red-100 text-red-800":i.applicationsCount>=i.maxApplications*.8?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"}`,children:i.applicationsCount>=i.maxApplications?"Applications Closed!":`${i.applicationsCount}/${i.maxApplications}`})]}),i.maxCreators&&i.maxCreators>1&&e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(ve,{className:"w-4 h-4 mr-3 text-blue-500"}),e.jsxs("span",{children:["Paid: ",i.paidCreatorsCount||0,"/",i.maxCreators," creators"]}),e.jsxs("span",{className:"ml-2 text-sm text-gray-500",children:["($",i.totalPaidAmount||0," paid, $",i.remainingBudget||0," remaining)"]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Payment Structure"}),e.jsx("div",{className:"space-y-2",children:i.payment.milestones.map(b=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:b.description}),e.jsxs("span",{className:"font-semibold text-gray-900",children:["$",Math.round(i.payment.amount*(b.percentage/100))," (",b.percentage,"%)"]})]},b.id))})]})]}),e.jsxs("button",{onClick:()=>t(i.id),className:"bg-blue-600 text-white px-6 py-3 rounded-xl hover:bg-blue-700 transition-colors duration-200 flex items-center space-x-2",children:[e.jsx(jt,{className:"w-4 h-4"}),e.jsx("span",{children:"View Full Details"})]})]}),c==="applications"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Applications"}),g?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(ce,{className:"w-12 h-12 mx-auto mb-4 text-gray-300 animate-spin"}),e.jsx("p",{children:"Loading applications..."})]}):x[i.id]?.length>0?e.jsx("div",{className:"space-y-4",children:x[i.id].map(b=>e.jsxs("div",{className:"border border-gray-200 rounded-xl p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:b.creatorName}),e.jsxs("p",{className:"text-gray-600 text-sm",children:["Creator ID: ",b.creatorId]}),e.jsxs("p",{className:"text-gray-500 text-sm",children:["Applied: ",new Date(b.submittedAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${w(b.status)}`,children:b.status})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:"Message:"}),e.jsxs("p",{className:"text-gray-700 text-sm bg-gray-50 p-3 rounded-lg italic",children:['"',b.message,'"']})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:"Proposed Timeline:"}),e.jsx("p",{className:"text-gray-700 text-sm bg-gray-50 p-3 rounded-lg",children:b.proposedTimeline})]})]}),b.reviewedAt&&e.jsxs("p",{className:"text-gray-500 text-sm mb-4",children:["Reviewed: ",new Date(b.reviewedAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]}),b.status==="pending"&&e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:()=>Z(i.id,b.id),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors duration-200 flex items-center space-x-2",children:[e.jsx(O,{className:"w-4 h-4"}),e.jsx("span",{children:"Approve"})]}),e.jsxs("button",{onClick:()=>I(i.id,b.id),className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors duration-200 flex items-center space-x-2",children:[e.jsx(pe,{className:"w-4 h-4"}),e.jsx("span",{children:"Reject"})]})]})]},b.id))}):e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(he,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No applications yet"}),e.jsx("p",{className:"text-sm mt-2",children:"When creators apply to this bounty, you'll see their applications here."})]})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Content Submissions"}),e.jsxs("button",{onClick:()=>N(i.id),className:"px-4 py-2 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[e.jsx(re,{className:"w-4 h-4"}),e.jsx("span",{children:"View Submissions"})]})]}),j[i.id]?.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ce,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No submissions yet"}),e.jsx("p",{className:"text-gray-600",children:"Creators will appear here once they submit their content for this bounty."})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(O,{className:"w-16 h-16 text-green-400 mx-auto mb-4"}),e.jsxs("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:[j[i.id]?.length," submission",j[i.id]?.length!==1?"s":""," received"]}),e.jsx("p",{className:"text-gray-600 mb-4",children:'Click "View Submissions" to review and manage content.'})]})]})]})]})]},i.id)),U>1&&e.jsx(Oe,{currentPage:G,totalPages:U,totalItems:_,itemsPerPage:a,onPageChange:X}),S&&k&&e.jsx(Bt,{bountyId:k,onClose:C,onSubmissionUpdated:()=>{P(k)}})]})},Wt=()=>{const{user:s}=ge(),t=de(),{isPremium:a,hasReachedApplicationLimit:l,applicationsRemaining:n,upgradePrompts:r}=rt(),[o,c]=y.useState(null),[d,x]=y.useState(!1),[h,g]=y.useState(!1),[v,S]=y.useState(null),[m,k]=y.useState(void 0),[L,j]=y.useState(!1),[u,f]=y.useState("pending"),{data:A=[],isLoading:G}=He(),{data:U=[],isLoading:_}=Ze(s?.userType==="business"?s.id:""),{data:R=[],isLoading:X}=Je(s?.userType==="creator"?s.id:""),{data:H=[],isLoading:w}=et(s?.userType==="creator"?s.id:""),Z=tt();kt();const I=s?.userType==="business"?U:A.filter(p=>!(p.status!=="active"||!(p.escrowPaymentId||p.status==="active")||p.maxApplications&&p.applicationsCount>=p.maxApplications||p.maxCreators&&p.applicationsCount>=p.maxCreators)),N=s?.userType==="business"?_:G,C=new Set(R.map(p=>p.bountyId)),P={};R.forEach(p=>{P[p.bountyId]=p.status});const z={},ne={},J={};H.forEach(p=>{z[p.bountyId]=p.status,J[p.bountyId]=p.id,p.feedback&&(ne[p.bountyId]=p.feedback)});const i=async p=>{if(!s||s.userType!=="creator"){alert("Only creators can apply to bounties");return}if(C.has(p)){alert("You have already applied to this bounty");return}const M=I.find(le=>le.id===p);if(!M){alert("Bounty not found");return}if(!(M.escrowPaymentId||M.status==="active")){alert("This bounty is not yet funded. You can only apply to bounties with secured payments.");return}try{const le={bountyId:p,creatorId:s.id,creatorName:s.name,message:"I would like to apply for this bounty!",proposedTimeline:"7-14 days",status:"pending"};await Z.mutateAsync(le),alert("Application submitted successfully!")}catch(le){console.error("Error submitting application:",le),alert("Failed to submit application. Please try again.")}},b=p=>{const M=I.find(te=>te.id===p);M&&(c(M),x(!0))},D=async p=>{try{const M=I.find(te=>te.id===p);if(M){S(M);const te=J[p];k(te),g(!0)}}catch(M){console.error("Error opening delivery modal:",M),alert("Failed to open delivery form. Please try again.")}},E=()=>{g(!1),S(null),k(void 0)},V=()=>{console.log("Delivery submitted successfully")},W=()=>{x(!1),c(null)},T=s?.userType==="business"?I.filter(p=>p.businessId===s.id):I;return console.log("User type:",s?.userType,"Total bounties:",I.length,"Filtered bounties:",T.length),console.log("Bounty statuses for creators:",s?.userType==="creator"?I.map(p=>({id:p.id,status:p.status,title:p.title})):"N/A"),N||X||w?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-gray-900 py-12 px-8",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx(Ye,{size:"lg",text:"Loading bounties..."})})}):s?.userType==="business"?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-gray-900 py-12 px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-12",children:[e.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:"My Bounties"}),e.jsx("p",{className:"text-gray-300 text-lg",children:"Manage your created bounties, review applications, and approve deliveries."})]}),e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"border-b border-gray-600",children:e.jsxs("nav",{className:"flex space-x-8",children:[e.jsxs("button",{onClick:()=>f("pending"),className:`py-2 px-1 border-b-2 font-medium text-sm ${u==="pending"?"border-blue-500 text-blue-400":"border-transparent text-gray-400 hover:text-gray-300"}`,children:["Pending Bounties (",T.filter(p=>p.status==="pending").length,")"]}),e.jsxs("button",{onClick:()=>f("active"),className:`py-2 px-1 border-b-2 font-medium text-sm ${u==="active"?"border-blue-500 text-blue-400":"border-transparent text-gray-400 hover:text-gray-300"}`,children:["Active Bounties (",T.filter(p=>p.status==="active").length,")"]}),e.jsxs("button",{onClick:()=>f("completed"),className:`py-2 px-1 border-b-2 font-medium text-sm ${u==="completed"?"border-blue-500 text-blue-400":"border-transparent text-gray-400 hover:text-gray-300"}`,children:["Completed Bounties (",T.filter(p=>p.status==="completed").length,")"]})]})})}),u==="pending"&&T.filter(p=>p.status==="pending").length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Pending Bounties"}),e.jsx("p",{className:"text-gray-300 mb-6",children:"These bounties are not yet live on the marketplace. Fund them to make them available to creators."}),e.jsx(je,{bounties:T.filter(p=>p.status==="pending"),onViewDetails:b,onBountyUpdated:()=>{t.invalidateQueries({queryKey:["bounties","user",s?.id]}),t.invalidateQueries({queryKey:["bounties"]})}})]}),u==="active"&&T.filter(p=>p.status==="active").length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Active Bounties"}),e.jsx(je,{bounties:T.filter(p=>p.status==="active"),onViewDetails:b,onBountyUpdated:()=>{t.invalidateQueries({queryKey:["bounties","user",s?.id]}),t.invalidateQueries({queryKey:["bounties"]})}})]}),u==="completed"&&T.filter(p=>p.status==="completed").length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Completed Bounties"}),e.jsx(je,{bounties:T.filter(p=>p.status==="completed"),onViewDetails:b,onBountyUpdated:()=>{t.invalidateQueries({queryKey:["bounties","user",s?.id]}),t.invalidateQueries({queryKey:["bounties"]})}})]}),T.filter(p=>p.status===u).length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(qe,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-300 mb-2",children:u==="pending"?"No Pending Bounties":u==="active"?"No Active Bounties":"No Completed Bounties"}),e.jsx("p",{className:"text-gray-400 mb-6",children:u==="pending"?"You don't have any pending bounties. Create a new bounty to get started!":u==="active"?"You don't have any active bounties right now. Fund your pending bounties or create new ones!":"Completed bounties will appear here once you finish your active projects."}),e.jsx(xe,{onClick:()=>window.location.href="/bounties/create",className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Create New Bounty"})]}),e.jsx(Pe,{bounty:o,isOpen:d,onClose:W,onApply:i}),e.jsx(Te,{bounty:v,isOpen:h,onClose:E,onSuccess:V,existingSubmissionId:m})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-gray-900 py-12 px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-12",children:[e.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:"Browse Bounties"}),e.jsx("p",{className:"text-gray-300 text-lg",children:"Discover active bounties from businesses looking for content creators. Use filters to find opportunities that match your skills and audience."})]}),!a&&e.jsx("div",{className:"mb-8",children:e.jsx(ye,{className:"p-6 bg-gradient-to-r from-blue-600 to-purple-600 border-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center",children:e.jsx(Le,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Free Creator Plan"}),e.jsxs("p",{className:"text-blue-100",children:[n," applications remaining this month • Zero fees"]})]})]}),e.jsx(xe,{onClick:()=>j(!0),className:"bg-white text-blue-600 hover:bg-gray-100 font-semibold",children:"Upgrade to Premium"})]})})}),l&&!a&&e.jsx("div",{className:"mb-8",children:e.jsx(ye,{className:"p-6 bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Le,{className:"w-5 h-5 text-yellow-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-yellow-800 dark:text-yellow-200",children:"Application Limit Reached"}),e.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:"You've used all 3 applications this month. Upgrade to apply to unlimited bounties!"})]})]}),e.jsx(xe,{onClick:()=>j(!0),variant:"outline",size:"sm",className:"border-yellow-300 text-yellow-700 hover:bg-yellow-100",children:"Upgrade Now"})]})})}),r.length>0&&!a&&e.jsx("div",{className:"mb-8",children:e.jsx(ye,{className:"p-4 bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(vt,{className:"w-5 h-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-green-800 dark:text-green-200",children:"Upgrade Opportunity"}),e.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:r[0]?.message})]})]}),e.jsx(xe,{onClick:()=>j(!0),variant:"outline",size:"sm",className:"border-green-300 text-green-700 hover:bg-green-100",children:"Upgrade Now"})]})})}),e.jsx(Dt,{bounties:T,onApply:i,onViewDetails:b,onDeliver:D,appliedBounties:C,applicationStatuses:P,submissionStatuses:z,submissionFeedback:ne,showStatusTabs:!!(s&&s.userType==="business")}),e.jsx(Pe,{bounty:o,isOpen:d,onClose:W,onApply:i}),e.jsx(Te,{bounty:v,isOpen:h,onClose:E,onSuccess:V,existingSubmissionId:m}),e.jsx(it,{isOpen:L,onClose:()=>j(!1),trigger:l?"application_limit":"manual"})]})})};export{Wt as default};
