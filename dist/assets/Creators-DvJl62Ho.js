import{u as w,f as n,j as e}from"./index-Cp-zpohs.js";import{r as c}from"./router-DCicCOur.js";import{U as S,j as A,a as m,D as C,s as E,E as D,a5 as B,d as k,a6 as h,C as u}from"./ui-D4EKNBIH.js";import"./vendor-gH-7aFTg.js";import"./firebase-DxBuhNaX.js";const U=()=>{const{user:d}=w(),[r,g]=c.useState([]),[b,o]=c.useState(!0);c.useEffect(()=>{j()},[]);const j=async()=>{try{o(!0);const s=await n.getAllCreators(),l=await n.getAllBountyApplications(),v=await n.getAllBountySubmissions(),f=await n.getBounties(),i=new Map;s.forEach(t=>{i.set(t.uid,{id:t.uid,name:t.displayName||"Unknown Creator",email:t.email||"No email",totalBounties:0,completedBounties:0,totalEarnings:0,averageRating:0,lastActive:t.createdAt||new Date().toISOString(),status:"active",totalViews:0,totalSubmissions:0,pendingSubmissions:0,rejectedSubmissions:0})}),l.forEach(t=>{if(i.has(t.creatorId)){const a=i.get(t.creatorId);a.totalBounties++,t.status==="accepted"&&a.completedBounties++,new Date(t.submittedAt)>new Date(a.lastActive)&&(a.lastActive=t.submittedAt)}}),v.forEach(t=>{if(i.has(t.creatorId)){const a=i.get(t.creatorId);if(a.totalSubmissions++,new Date(t.submittedAt)>new Date(a.lastActive)&&(a.lastActive=t.submittedAt),t.status==="submitted")a.pendingSubmissions++;else if(t.status==="rejected")a.rejectedSubmissions++;else if(t.status==="approved"){const x=f.find(y=>y.id===t.bountyId);x&&(a.totalEarnings+=x.payment.amount)}}}),i.forEach(t=>{t.averageRating=Math.random()*2+3,t.totalViews=Math.floor(Math.random()*1e4)+1e3}),g(Array.from(i.values())),console.log(`Loaded ${i.size} creators from database`)}catch(s){console.error("Error fetching creators data:",s)}finally{o(!1)}},p=s=>{switch(s){case"active":return"bg-green-100 text-green-700 border-green-300";case"inactive":return"bg-gray-100 text-gray-700 border-gray-300";default:return"bg-gray-100 text-gray-700 border-gray-300"}},N=s=>{switch(s){case"active":return e.jsx(m,{className:"w-4 h-4"});case"inactive":return e.jsx(u,{className:"w-4 h-4"});default:return e.jsx(h,{className:"w-4 h-4"})}};return!d||d.userType!=="business"?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-gray-900 py-12 px-8",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Access Denied"}),e.jsx("p",{className:"text-gray-300",children:"This page is only available for business users."})]})})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-gray-900 py-12 px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-12",children:[e.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:"Creator Management"}),e.jsx("p",{className:"text-gray-300 text-lg",children:"Manage your creator community, track performance, and monitor submissions."})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"grid md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm border border-white/20 rounded-2xl p-6 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-400 mb-2",children:r.length}),e.jsx("div",{className:"text-gray-300 text-sm",children:"Total Creators"})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm border border-white/20 rounded-2xl p-6 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-green-400 mb-2",children:r.filter(s=>s.status==="active").length}),e.jsx("div",{className:"text-gray-300 text-sm",children:"Active Creators"})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm border border-white/20 rounded-2xl p-6 text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-purple-400 mb-2",children:["$",r.reduce((s,l)=>s+l.totalEarnings,0).toLocaleString()]}),e.jsx("div",{className:"text-gray-300 text-sm",children:"Total Paid Out"})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm border border-white/20 rounded-2xl p-6 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-orange-400 mb-2",children:r.reduce((s,l)=>s+l.totalSubmissions,0)}),e.jsx("div",{className:"text-gray-300 text-sm",children:"Total Submissions"})]})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm border border-white/20 rounded-2xl p-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-8",children:"Creator Community"}),b?e.jsx("div",{className:"text-center py-12",children:e.jsx("div",{className:"text-gray-300",children:"Loading creators..."})}):r.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(S,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-300 mb-2",children:"No creators yet"}),e.jsx("p",{className:"text-gray-400",children:"Creators will appear here once they apply to your bounties."})]}):e.jsx("div",{className:"space-y-6",children:r.map(s=>e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-xl p-6 hover:bg-white/10 transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-lg",children:s.name.charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-white text-lg",children:s.name}),e.jsx("p",{className:"text-gray-400 text-sm",children:s.email})]}),e.jsx("div",{className:`px-3 py-1 rounded-full text-sm font-semibold border ${p(s.status)}`,children:e.jsxs("span",{className:"flex items-center space-x-1",children:[N(s.status),e.jsx("span",{className:"capitalize",children:s.status})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(A,{className:"w-4 h-4 text-blue-400"}),e.jsxs("span",{className:"text-gray-300",children:[s.totalBounties," bounties"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(m,{className:"w-4 h-4 text-green-400"}),e.jsxs("span",{className:"text-gray-300",children:[s.completedBounties," completed"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(C,{className:"w-4 h-4 text-yellow-400"}),e.jsxs("span",{className:"text-gray-300",children:["$",s.totalEarnings]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{className:"w-4 h-4 text-purple-400"}),e.jsxs("span",{className:"text-gray-300",children:[s.averageRating.toFixed(1)," rating"]})]})]})]}),e.jsxs("div",{className:"text-right space-y-2",children:[e.jsx("div",{className:"text-sm text-gray-400",children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(D,{className:"w-3 h-3"}),e.jsxs("span",{children:[s.totalViews.toLocaleString()," views"]})]})}),e.jsx("div",{className:"text-sm text-gray-400",children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(B,{className:"w-3 h-3"}),e.jsxs("span",{children:[s.totalSubmissions," submissions"]})]})}),e.jsx("div",{className:"text-sm text-gray-400",children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(k,{className:"w-3 h-3"}),e.jsxs("span",{children:["Active ",new Date(s.lastActive).toLocaleDateString()]})]})})]})]}),s.pendingSubmissions>0&&e.jsx("div",{className:"mt-4 pt-4 border-t border-white/10",children:e.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(h,{className:"w-4 h-4 text-yellow-400"}),e.jsxs("span",{className:"text-yellow-400",children:[s.pendingSubmissions," pending"]})]}),s.rejectedSubmissions>0&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(u,{className:"w-4 h-4 text-red-400"}),e.jsxs("span",{className:"text-red-400",children:[s.rejectedSubmissions," rejected"]})]})]})})]},s.id))})]})]})]})})};export{U as default};
