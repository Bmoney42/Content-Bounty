import{u as B,j as e,f as o}from"./index-Cp-zpohs.js";import{r as n}from"./router-DCicCOur.js";import{a5 as p,e as C,d as D,a as b,C as g,a6 as j}from"./ui-D4EKNBIH.js";import"./vendor-gH-7aFTg.js";import"./firebase-DxBuhNaX.js";const L=()=>{const{user:l}=B(),[i,d]=n.useState([]),[y,x]=n.useState(!0),[c,f]=n.useState("all");n.useEffect(()=>{(async()=>{if(!(!l||l.userType!=="business"))try{x(!0);const t=await o.getBountiesByUser(l.id),a=[];for(const r of t){const A=(await o.getBountyApplications(r.id)).map(S=>({...S,bountyTitle:r.title}));a.push(...A)}a.sort((r,h)=>new Date(h.submittedAt).getTime()-new Date(r.submittedAt).getTime()),d(a)}catch(t){console.error("Error fetching applications:",t)}finally{x(!1)}})()},[l]);const m=async(s,t)=>{try{await o.updateApplicationStatus(s,t),d(a=>a.map(r=>r.id===s?{...r,status:t,reviewedAt:new Date().toISOString()}:r)),alert(`Application ${t} successfully!`)}catch(a){console.error(`Error ${t} application:`,a),alert(`Failed to ${t.slice(0,-2)} application. Please try again.`)}},w=s=>{switch(s){case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"accepted":return"bg-green-100 text-green-800 border-green-200";case"rejected":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},N=s=>{switch(s){case"pending":return e.jsx(j,{className:"w-4 h-4"});case"accepted":return e.jsx(b,{className:"w-4 h-4"});case"rejected":return e.jsx(g,{className:"w-4 h-4"});default:return e.jsx(j,{className:"w-4 h-4"})}},u=c==="all"?i:i.filter(s=>s.bountyId===c),v=Array.from(new Set(i.map(s=>s.bountyId))).map(s=>{const t=i.find(a=>a.bountyId===s);return{id:s,title:t?.bountyTitle||"Unknown Bounty"}});return l?.userType!=="business"?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-gray-900 py-12 px-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-4",children:"Access Denied"}),e.jsx("p",{className:"text-gray-300",children:"Only business users can view applications."})]})}):y?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-gray-900 py-12 px-8",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"text-white text-xl",children:"Loading applications..."})})})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-gray-900 py-12 px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:"Applications"}),e.jsx("p",{className:"text-gray-300 text-lg",children:"Review and manage applications for your bounties"})]}),e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm border border-white/20 rounded-2xl p-6",children:[e.jsx("label",{className:"block text-sm font-semibold text-white mb-3",children:"Filter by Bounty"}),e.jsxs("select",{value:c,onChange:s=>f(s.target.value),className:"w-full md:w-auto px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white focus:outline-none focus:border-blue-500",children:[e.jsxs("option",{value:"all",className:"bg-gray-800",children:["All Bounties (",i.length,")"]}),v.map(s=>e.jsxs("option",{value:s.id,className:"bg-gray-800",children:[s.title," (",i.filter(t=>t.bountyId===s.id).length,")"]},s.id))]})]})}),u.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx(p,{className:"w-16 h-16 text-white/40 mx-auto mb-6"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-3",children:"No Applications Yet"}),e.jsx("p",{className:"text-white/60",children:"When creators apply to your bounties, you'll see their applications here."})]}):e.jsx("div",{className:"space-y-6",children:u.map(s=>e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm border border-white/20 rounded-2xl p-8",children:[e.jsx("div",{className:"flex items-start justify-between mb-6",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx(C,{className:"w-5 h-5 text-blue-400"}),e.jsx("h3",{className:"text-xl font-bold text-white",children:s.creatorName}),e.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-semibold border ${w(s.status)} flex items-center space-x-1`,children:[N(s.status),e.jsx("span",{className:"capitalize",children:s.status})]})]}),e.jsxs("p",{className:"text-blue-300 font-medium mb-4",children:["Applied to: ",s.bountyTitle]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-white font-semibold mb-2 flex items-center space-x-2",children:[e.jsx(p,{className:"w-4 h-4"}),e.jsx("span",{children:"Message"})]}),e.jsx("p",{className:"text-gray-300 text-sm bg-white/5 p-4 rounded-xl",children:s.message})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-white font-semibold mb-2 flex items-center space-x-2",children:[e.jsx(D,{className:"w-4 h-4"}),e.jsx("span",{children:"Proposed Timeline"})]}),e.jsx("p",{className:"text-gray-300 text-sm bg-white/5 p-4 rounded-xl",children:s.proposedTimeline})]})]}),e.jsxs("div",{className:"text-sm text-gray-400",children:["Applied: ",new Date(s.submittedAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),s.reviewedAt&&e.jsxs("span",{className:"ml-4",children:["Reviewed: ",new Date(s.reviewedAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]})]})}),s.status==="pending"&&e.jsxs("div",{className:"flex space-x-4 pt-6 border-t border-white/20",children:[e.jsxs("button",{onClick:()=>m(s.id,"accepted"),className:"flex-1 bg-gradient-to-r from-green-500 to-emerald-600 text-white font-semibold py-3 px-6 rounded-xl hover:shadow-lg transition-all duration-300 flex items-center justify-center space-x-2",children:[e.jsx(b,{className:"w-5 h-5"}),e.jsx("span",{children:"Accept"})]}),e.jsxs("button",{onClick:()=>m(s.id,"rejected"),className:"flex-1 bg-gradient-to-r from-red-500 to-red-600 text-white font-semibold py-3 px-6 rounded-xl hover:shadow-lg transition-all duration-300 flex items-center justify-center space-x-2",children:[e.jsx(g,{className:"w-5 h-5"}),e.jsx("span",{children:"Reject"})]})]})]},s.id))})]})})};export{L as default};
